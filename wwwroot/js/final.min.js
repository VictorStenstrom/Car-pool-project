"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }
//
// Inviewanimation
// v1.0 - (by Isak?)

(function () {
  var ivaobjects = document.querySelectorAll("[data-inviewanimation]");
  function checkIVAObjects() {
    for (var x = 0; x < ivaobjects.length; x++) {
      var rect = ivaobjects[x].getBoundingClientRect();
      if (ivaobjects[x].hasAttribute("data-inviewanimation") && rect.top < window.innerHeight && rect.bottom > 0) {
        ivaobjects[x].removeAttribute("data-inviewanimation");
        ivaobjects[x].classList.add("inview");
      }
    }
  }
  checkIVAObjects();
  document.addEventListener("scroll", checkIVAObjects, false);
})();
// Polyfill to enable .forEach from .querySelectorAll in older IE-browsers
if (window.NodeList && !NodeList.prototype.forEach) {
  NodeList.prototype.forEach = function (callback, thisArg) {
    thisArg = thisArg || window;
    for (var i = 0; i < this.length; i++) {
      callback.call(thisArg, this[i], i, this);
    }
  };
}
var Easyweb = function () {
  "use strict";

  var version = "1.6";
  var init = function init(options) {
    // Set options if provided
    //
    setOptions(options);

    // Runs the cookie bar handler script immediately
    //
    initCookieFunctionality();

    // Initializes simple toogle mode with:
    // ew-toggle="classname"
    //
    registerTogglers();

    // Registrerar möjlighet för en "scroll-load"-funktion vid långa listor för "auto-paging"
    // (följande X antal satt i byggaren appendas till listan när ens scroll närmar sig botten)
    //
    registerAutoLoad();

    // Registrerar möjlighet för en "klick-load"-knapp vid långa listor för "auto-paging"
    // (följande X antal satt i byggaren appendas till listan när man klickar på en knapp, ex. "Ladda fler")
    //
    registerClickLoad();

    // .state--active för labels och auto-resize för textarea
    //
    registerFormFunctions();

    // Instagram-komponent-loader som hämtar instagram-innehåll med ajax för efter att sidan laddats in om komponenten finns
    // Se: https://gitlab.sphinx.se/albatross/albatross-source/-/tree/master/Plugins/Albatross.Plugins.Instagram
    //
    registerEwsInstagram();

    // Ponty-komponent-loader som hämtar ponty-jobs med ajax för efter att sidan laddats in om komponenten finns
    //
    registerEwsPonty();
  };

  //#region - Consent cookie -

  /**
   * Plockar upp klick på kakans knapp, sätter kaka för att registrera att den klickats på, tar sedan bort klassen 'hidden' från kak-containern om kaka redan finns
   * */
  var initCookieFunctionality = function initCookieFunctionality() {
    var privacyCookieName = "EW.Privacy.Consent";
    var removeCookieBar = function removeCookieBar(cookieContainerElement) {
      var onRemoveButtonClick = function onRemoveButtonClick(el) {
        var cookieToAdd = privacyCookieName + '=yes;expires=' + new Date(Date.now() + 365 * 24 * 60 * 60 * 1000).toGMTString() + ';path=/;samesite=lax';
        document.cookie = cookieToAdd;
        cookieContainerElement.setAttribute('class', 'hidden');
      };
      return onRemoveButtonClick;
    };
    if (document.cookie && document.cookie.indexOf(privacyCookieName) > -1) {
      return;
    }
    var cookieContainerElement = document.getElementById('ew-cookieinfo-container');
    if (!cookieContainerElement) return;
    var cookieButtonElement = document.getElementById('ew-cookieinfo-button-ok');
    if (!cookieButtonElement) return;
    cookieButtonElement.addEventListener('click', removeCookieBar(cookieContainerElement), false);
    cookieContainerElement.setAttribute('class', '');
  };
  //#endregion

  //#region - Run delayed -
  var delayedFunctions = [];
  var delayed = false;
  /** 
   Kör samtliga registrerade delayed functions och avvregistrerar dem sedan.
   */
  var onDelayed = function onDelayed() {
    if (delayedFunctions.length === 0) return;
    delayedFunctions.forEach(function (functionToRun) {
      if (typeof functionToRun === 'function') functionToRun();
    });
    delayedFunctions = [];
  };

  /**
   * Registrerar en funktion att köra delayed, 
   * vilket innebär att den körs först på första scroll, alt. om sidan laddats om efter scroll och scroll-top inte är 0 efter 500ms
   * @param {any} functionToRun Funktionen som kommer att köras vid scroll eller om redan scroll.
   */
  var runDelayed = function runDelayed(functionToRun) {
    // Laddar vi in sidan "scrollad" (reload) körs funktionen direkt efter 500ms
    //
    var currentScrollPosition = window.scrollY || document.documentElement.scrollTop;
    if (currentScrollPosition > 0) {
      if (typeof functionToRun === 'function') window.setTimeout(function () {
        functionToRun();
      }, 500);
      return;
    }
    if (document.body.clientHeight < window.innerHeight) {
      if (typeof functionToRun === 'function') window.setTimeout(function () {
        functionToRun();
      }, 500);
      return;
    }

    // Annars registrerar vi dne som en delayed funktion
    //
    delayedFunctions.push(functionToRun);

    // Om vi inte redan markerat att delay är i play, markerar vi det, och registrerar att onDelayed() ska köras på scroll.
    //
    if (!delayed) {
      delayed = true;
      window.addEventListener("scroll", function () {
        onDelayed();
      });
    }
  };

  //#endregion

  /**
   * Svarar med huruvida debug-läget är aktiverat under körning (ofta enbart vid utvckling)
   * */
  var inDebug = window.albatrossInDebug !== undefined ? window.albatrossInDebug : false;

  /**
   * Kontrollerar om angivet argument är en giltig e-postadress
   * @param {any} emailAddress E-postadress att kontroller
   */
  var isEmail = function isEmail(emailAddress) {
    var pattern = new RegExp(/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/);
    return pattern.test(emailAddress);
  };
  var defaultOptions = {
    loaderMarkup: "<div class='form-loader'><i class='ew-loader'><i></i></i></div>"
  };
  var setOptions = function setOptions(options) {
    if (options === undefined || _typeof(options) !== 'object') return;
    for (var key in options) {
      defaultOptions[key] = options[key];
    }
    return defaultOptions;
  };

  /**
   * Enkel localstorage-helper via Easyweb.storage.setItem samt Easyweb.storage.getItem.
   * Används med fördel för att vid senare tillfälle uppdatera från localStorage till framtida mer effektiva storage-lösningar
   * */
  var storage = {
    isSupported: "localStorage" in window && null !== window.localStorage,
    setItem: function setItem(key, val) {
      if (!this.isSupported) return;
      if (key === null || key === undefined) window.localStorage.removeItem(key);else window.localStorage.setItem(key, val);
    },
    getItem: function getItem(key) {
      if (!this.isSupported) return null;
      return window.localStorage.getItem(key);
    }
  };

  /**
   * Enkel ajax-laddare för att hämta en url och specificera callback för success samt error.
   * Främst menad att enkelt bygga bort jQuery-beroenden. Inkluderar cache-breaker.
   * @param {any} url Url att anrop
   * @param {any} responseCallback Callback som anropas vid lyckat anrop. Anropas med hela responset (requestet) som argument.
   * @param {any} errorCallback // Callback som anropas vid misslyckat anrop. Anropas med hela responset (requestet) som argument.
   */
  var httpGet = function httpGet(url, responseCallback, errorCallback) {
    var ajax = new XMLHttpRequest();
    ajax.onreadystatechange = function () {
      if (this.readyState === 4) {
        if (this.status === 200) {
          if (typeof responseCallback !== 'undefined') responseCallback(this);
        } else {
          if (typeof errorCallback !== 'undefined') errorCallback(this);
        }
      }
    };
    var cacheBreaker = Date.now();
    url += url.indexOf("?") > -1 ? "&jq=" + cacheBreaker : "?jq=" + cacheBreaker;
    ajax.open("GET", url, true);
    ajax.setRequestHeader("Content-Type", "application/json");
    ajax.setRequestHeader("X-Requested-With", "XMLHttpRequest");
    ajax.send();
  };

  // Pager counter to know how much we have and should load
  // Notis: Statisk = fungerar bra för en per page load. Bör faktoreras om.
  var currentPage = 1;

  // #region - Auto load on scroll -
  var registerAutoLoad = function registerAutoLoad() {
    // Quick & dirty element cheon to see whether we should use scroll load
    var autoScrollCallElement = document.getElementById("scroll-load");
    if (autoScrollCallElement) {
      var onFrame = function onFrame() {
        onScroll();
        throttled = false;
      };
      var onScroll = function onScroll() {
        // Return if we're out of items or is already loading an item batch
        if (autoScrollLoading || reachedEndOfItems) return false;
        if (lastElementPosFromTop < 1) {
          // Mark that we're loading a batch
          autoScrollLoading = true;
          // Increase the current pager page loaded
          currentPage++;

          // Dirty url creation for the ajax endpoint
          var requestUrl = autoScrollCallElement.getAttribute("href") || window.location.pathname;
          // Home path needs to be appended with /home as /template without following url is a potential article url
          if (requestUrl === "/") requestUrl = "/home";
          requestUrl += autoScrollKey + "&p=" + currentPage;

          // To use if neccessary
          var currentCount = itemContainer.querySelectorAll(itemSelector).length;

          // Load moar!
          httpGet("/template" + requestUrl, function (response) {
            // make elements out of html
            var loadedItems = document.createRange().createContextualFragment(response.responseText);

            // If server returned less than our page size, we've reached the end.
            // 6 is used for Äktavara, should be rewritten to be more dynamic
            if (loadedItems && loadedItems.childNodes.length < 6) reachedEndOfItems = true;

            // Append them items and fade 'em in, swooosh
            itemContainer.appendChild(loadedItems);

            // We're not longer loading, allowing for the next page to start loading when neccessary
            autoScrollLoading = false;
          });

          // Prevent the browser view to stick to the bottom 
          // after load by making sure the scroll is not at the end.
          window.scrollBy(0, -1);
        }
      };
      var autoScrollKey = "?key=" + autoScrollCallElement.getAttribute("load-key");
      var autoScrollLoading = false;

      // Container for all items (will be appended to)
      var itemContainer = document.querySelector(".auto-load-container");
      // Each individual item, to count
      var itemSelector = ".auto-load-item";

      // Whether the back is out of items to deliver
      var reachedEndOfItems = false;
      var lastElementPosFromTop = 0;
      var throttled = false;

      // On scroll
      document.addEventListener("scroll", function () {
        lastElementPosFromTop = autoScrollCallElement.getBoundingClientRect().y - window.innerHeight;
        if (!throttled) {
          window.requestAnimationFrame(onFrame);
          throttled = true;
        }
      });
    }
  };
  var registerClickLoad = function registerClickLoad() {
    // Quick & dirty element cheon to see whether we should use scroll load
    var clickLoadElement = document.getElementById("click-load");
    if (clickLoadElement) {
      var clickLoading = false;
      var loadKey = clickLoadElement.getAttribute("load-key");

      // Container for all items (will be appended to)
      var itemContainer = document.querySelector(".load-container");
      // Each individual item, to count
      var itemSelector = ".load-item";

      // Whether the back is out of items to deliver
      var reachedEndOfItems = false;

      // On scroll
      clickLoadElement.click(function (e) {
        e.preventDefault();

        // Return if we're out of items or is already loading an item batch
        if (clickLoading || reachedEndOfItems) return false;

        // Mark that we're loading a batch
        clickLoading = true;
        // Increase the current pager page loaded
        currentPage++;

        // Dirty url creation for the ajax endpoint
        var requestUrl = clickLoadElement.getAttribute("href") || window.location.pathname;
        // Home path needs to be appended with /home as /template without following url is a potential article url
        if (requestUrl === "/") requestUrl = "/home";
        requestUrl += loadKey + "&p=" + currentPage;

        // To use if neccessary
        var currentCount = itemContainer.find(itemSelector).length;

        // Load moar!
        httpGet("/template" + requestUrl, function (xhr) {
          // make elements out of html
          var loadedItems = document.createRange().createContextualFragment(response.responseText);

          // If server returned less than our page size, we've reached the end.
          // 6 is used for Äktavara, should be rewritten to be more dynamic
          if (loadedItems && loadedItems.childNodes.length < 6) reachedEndOfItems = true;

          // Append them items and fade 'em in, swooosh
          itemContainer.appendChild(loadedItems);

          // We're not longer loading, allowing for the next page to start loading when neccessary
          clickLoading = false;
        });
      });
    }
  };
  var registerFormFunctions = function registerFormFunctions() {
    //
    // .state--active på labels
    function setActive(a) {
      a.classList.add("state--active");
    }
    function setInactive(a) {
      a.classList.remove("state--active");
    }
    var inputs = document.querySelectorAll("input, textarea");
    setTimeout(function () {
      inputs.forEach(function (el) {
        if (el.value !== null && el.value.length > 0) {
          siblings(el, "label", setActive);
        }
      });
    }, 200);
    inputs.forEach(function (el) {
      el.addEventListener("focus", function () {
        siblings(el, "label", setActive);
      });
    });
    inputs.forEach(function (el) {
      el.addEventListener("blur", function () {
        if (this.value.length < 1) {
          siblings(el, "label", setInactive);
        }
      });
    });

    //
    // auto-resize textarea
    document.querySelectorAll("textarea").forEach(function (el) {
      el.addEventListener("input", function () {
        var cs = window.getComputedStyle(this);
        // reset height to allow textarea to shrink again
        this.style.height = "auto";
        // when "box-sizing: border-box" we need to add vertical border size to scrollHeight
        this.style.height = this.scrollHeight + parseInt(cs.getPropertyValue("border-top-width")) + parseInt(cs.getPropertyValue("border-bottom-width")) + "px";
      });
    });

    /*
        Get siblings of element, optional using selector, option perform callback on them.
        Browser Compatibility:
        IE: -, Safari: 7, Chrome: 27, Edge: 79, Firefox: 32
    */
    function siblings(el, sel, cb) {
      var matches = [];
      var targets = sel ? el.parentNode.querySelectorAll(":scope > " + sel) : el.parentNode.children;
      targets.forEach(function (target) {
        if (target !== el) {
          matches.push(target);
        }
      });
      if (cb) {
        matches.forEach(cb);
      }
      return matches;
    }
  };

  // #endregion

  var registerTogglers = function registerTogglers(node) {
    node = node || document;
    var elements = node.querySelectorAll("[ew-toggle]"),
      targetSelector,
      targetNodes;
    elements.forEach(function (el) {
      targetSelector = el.getAttribute("ew-toggle");
      el.addEventListener("click", function (e) {
        e.preventDefault();
        if (targetSelector) {
          targetSelector = targetSelector.indexOf(".") === 0 || targetSelector.indexOf("#") === 0 ? targetSelector : targetSelector;
          targetNodes = el.parentNode.querySelectorAll(targetSelector);
        } else {
          targetNodes = el.children;
        }
        if (targetNodes) {
          targetNodes.forEach(function (targetEl) {
            toggleClass(targetEl, "open");
          });
        }
      }, false);
      el.removeAttribute("ew-toggle");
    });
  };

  // Toggles a class on an element and stores the value if storageKey is provided
  //
  var toggleClass = function toggleClass(element, cssClass, storageKey) {
    var toggleVal = null;
    if (element.classList.contains(cssClass)) {
      element.classList.remove(cssClass);
      toggleVal = null;
    } else {
      element.classList.add(cssClass);
      toggleVal = "on";
    }
    // Store value if key is specified
    if (storageKey !== undefined) {
      storage.setItem(storageKey, toggleVal);
    }
  };

  // #region BindEwLoad
  var bindEwsLoad = function bindEwsLoad(el, templateKey) {
    if (!templateKey) {
      console.warn("No template key set in ews-attribute");
      return;
    }

    // Hämta data med en liten delay för att inte sega ner first load vid google-pagespeed-mjäk
    runDelayed(function () {
      // Turn on useJsonApi to return json data instead
      var urlPath = location.pathname,
        useJsonApi = false;

      // Home path needs to be appended with /home as /template without following url is a potential article url
      if (urlPath === "/") urlPath = "/home";

      // Full url, like: /template/home?key=instagramfeed
      urlPath = (useJsonApi ? "/api" : "/template") + urlPath + "?key=" + templateKey;

      // Request inner template api with ajax and set response to container
      httpGet(urlPath, function (xhr) {
        if (xhr && xhr.responseText) {
          el.innerHTML = xhr.responseText;
        } else {
          console.warn("Loader returned no response.");
        }
      }, function (err) {
        console.error("Error loading api feed: ", err);
      });
    });
  };
  // #endregion

  // #region - Instagram -
  var registerEwsInstagram = function registerEwsInstagram(node) {
    node = node || document;

    // Attribute to query for and get key value for
    var queryAttributeName = "ews-instagram",
      elements = node.querySelectorAll("[" + queryAttributeName + "]"),
      templateKey;
    elements.forEach(function (el) {
      // Get key set on element printed by the IG-template
      templateKey = el.getAttribute(queryAttributeName);

      // Bind it's load func using element as content-container and key to fetch
      bindEwsLoad(el, templateKey);

      // Remove attribute from element to keep final markupgeneration clean and prevent double registrations
      // if run multiple times
      el.removeAttribute(queryAttributeName);
    });
  };

  // #endregion

  // #region - Ponty -

  var registerEwsPonty = function registerEwsPonty(node) {
    node = node || document;

    // Attribute to query for and get key value for
    var queryAttributeName = "ews-ponty",
      elements = node.querySelectorAll("[" + queryAttributeName + "]"),
      templateKey;
    elements.forEach(function (el) {
      // Get key set on element printed by the IG-template
      templateKey = el.getAttribute(queryAttributeName);

      // Bind it's load func using element as content-container and key to fetch
      bindEwsLoad(el, templateKey);

      // Remove attribute from element to keep final markupgeneration clean and prevent double registrations
      // if run multiple times
      el.removeAttribute(queryAttributeName);
    });
  };

  // #endregion

  // Init to be called if in use. Done at top of site/main/default.js
  //
  return {
    init: init,
    runDelayed: runDelayed,
    httpGet: httpGet,
    isEmail: isEmail,
    storage: storage,
    currentPage: currentPage,
    inDebug: inDebug,
    version: version
  };
}();

//Parallax
var parallaxIt = function parallaxIt(e, target, parent, movement) {
  var relX = e.pageX - offset(parent).left;
  var relY = e.pageY - offset(parent).top;
  var x = (relX - parent.offsetWidth / 2) / parent.offsetWidth * movement;
  var y = (relY - parent.offsetHeight / 2) / parent.offsetHeight * movement;
  target.style.setProperty('--parallax-x', x + "px");
  target.style.setProperty('--parallax-y', y + "px");
};
function offset(el) {
  var rect = el.getBoundingClientRect(),
    scrollLeft = window.pageXOffset || document.documentElement.scrollLeft,
    scrollTop = window.pageYOffset || document.documentElement.scrollTop;
  return {
    top: rect.top + scrollTop,
    left: rect.left + scrollLeft
  };
}
function parallaxItem(el, child, speed, remSpeed) {
  $(el).mousemove(function (e) {
    parallaxIt(e, this.querySelector(child), this, speed);
  });
  $(el).mouseleave(function (e) {
    parallaxIt(e, this.querySelector(child), this, remSpeed);
  });
}

/// <reference path="default/easyweb.core.1.0.js" />
/// <reference path="externalsphinxly/inviewanimation.1.0.js" />
/// <reference path="external/jquery.min.js" />

(function () {
  // #region - Init -

  // Init old funcs from EW-lib
  //
  if (typeof window.Easyweb !== "undefined") {
    window.Easyweb.init();
  } else {
    console.warn("easyweb.core.js not present.");
  }

  // #endregion
})();

// Folder structure for site specific code:
//
// js/components
//     Tydligt avskilda komponenter läggs som egna filer här. T.ex. contactMap.js eller productCalculator.js
//
// js/views
//     Sånt som är mindre komponentigt men knutet till en enda vy läggs här.
//
// js/global.js
//     Små globala grejer kan läggas här. Tänk på att avgränsa och klumpa ihop sånt som hör ihop.

var hamburger = document.querySelector('.hamburger');
var heroContent = document.querySelector('.hero');
var submenu = document.querySelector(".submenu");
var dropdown = document.querySelector(".dropdown");

//Hamburger menu start

document.querySelector(".js-hamburger").addEventListener("click", function () {
  var nav = document.querySelector(".nav").classList.toggle("open");
  //const btn = document.querySelector(".btn-header").classList.toggle("open");
  var body = document.querySelector("body").classList.toggle("no-scroll");
  var burger = document.querySelector(".js-hamburger").classList.toggle("open");
});
hamburger.addEventListener("click", function () {
  submenu.classList.add("hamburger-submenu");
  if (heroContent.classList.contains("hide")) {
    heroContent.classList.remove("hide");
  } else {
    heroContent.classList.add("hide");
  }
});

//Hamburger menu end

//Submenu start

dropdown.addEventListener("mouseover", function () {
  submenu.classList.add("show");
});
dropdown.addEventListener("mouseout", function () {
  submenu.classList.remove("show");
});

//Submenu end

// Filter news articles start

var tagBtns = document.querySelectorAll("[data-tag]");
var newsItems = document.querySelectorAll("[card-category]");
if (newsItems.length > 0) {
  tagBtns.forEach(function (btn) {
    btn.addEventListener('click', function () {
      newsItems.forEach(function (article) {
        article.classList.remove("show");
        if (btn.getAttribute("data-tag") === "All") {
          article.classList.remove("show");
          setTimeout(function () {
            article.classList.add('show');
          }, "0.01");
        } else if (article.getAttribute("card-category") === btn.getAttribute('data-tag')) {
          article.classList.remove("show");
          setTimeout(function () {
            article.classList.add('show');
          }, "0.01");
        }
      });
    });
  });
}

//Filter news articles end

//Search article start

if (window.location.href.includes("?q")) {
  if (newsItems.length > 0) {
    var link = createLink("/news", "Rensa", "#69c7a3", "#00bfa5");
    var _newsItems = document.querySelectorAll(".return-button");
    _newsItems.forEach(function (item) {
      return item.appendChild(link);
    });
  } else {
    var text = createText("Inga nyheter hittades");
    var _link = createLink("/news", "Ta mig tillbaka", "#69c7a3", "#00bfa5");
    var _newsItems2 = document.querySelectorAll(".return-button");
    _newsItems2.forEach(function (item) {
      item.appendChild(text);
      item.appendChild(_link);
    });
  }
  document.querySelector('.btn-light-green').scrollIntoView();
}
function createLink(href, text, color, hoverColor) {
  var link = document.createElement("a");
  link.setAttribute("href", href);
  link.textContent = text;
  link.style.color = color;
  link.style.padding = "20px";
  link.style.textDecoration = "none";
  link.style.transition = "color 0.2s ease-in-out";
  link.addEventListener("mouseenter", function () {
    link.style.color = hoverColor;
  });
  link.addEventListener("mouseleave", function () {
    link.style.color = color;
  });
  link.addEventListener("click", function (event) {
    scrollDown();
  });
  return link;
}
function createText(text) {
  var p = document.createElement("p");
  p.textContent = text;
  return p;
}
function scrollDown() {
  var currentPosition = window.pageYOffset || document.documentElement.scrollTop;
  var newPosition = currentPosition + window.innerHeight / 2;
  setTimeout(function () {
    window.scrollTo(0, newPosition);
  }, 2000);
}

//Search article end

//Ineractive map start

//const staticLocations = [{
//    id: 'fsdfosddwdfn345345k',
//    name: 'Dagsmejan',
//    longitude: 59.4472953,
//    latitude: 17.9519484,
//    description: 'lorem ipsum'
//},
//{
//    id: 'sdfikjwseouifger32434fdsf',
//    name: 'Häggvik',
//    longitude: 59.43990219999999,
//    latitude: 17.9306324,
//    description: 'lorem ipsum'
//},
//{
//    id: 'fsdfosdfn345345k',
//    name: 'Kista',
//    longitude: 59.40905590000001,
//    latitude: 17.9501393,
//    description: 'lorem ipsum'
//},
//{
//    id: 'fsdfosdfn345345k',
//    name: 'Kvarteret Sländan',
//    longitude: 59.3488355,
//    latitude: 18.0396816,
//    description: 'lorem ipsum'
//}
//];

var locations = [];
function initMap() {
  var mapElement = document.getElementById("map");
  if (mapElement !== null) {
    var map = new google.maps.Map(mapElement, {
      zoom: 11,
      center: {
        lat: 59.32932349999999,
        lng: 18.0685808
      },
      styles: [{
        "featureType": "water",
        "elementType": "geometry.fill",
        "stylers": [{
          "color": "#d3d3d3"
        }]
      }, {
        "featureType": "transit",
        "stylers": [{
          "color": "#808080"
        }, {
          "visibility": "off"
        }]
      }, {
        "featureType": "road.highway",
        "elementType": "geometry.stroke",
        "stylers": [{
          "visibility": "on"
        }, {
          "color": "#b3b3b3"
        }]
      }, {
        "featureType": "road.highway",
        "elementType": "geometry.fill",
        "stylers": [{
          "color": "#ffffff"
        }]
      }, {
        "featureType": "road.local",
        "elementType": "geometry.fill",
        "stylers": [{
          "visibility": "on"
        }, {
          "color": "#ffffff"
        }, {
          "weight": 1.8
        }]
      }, {
        "featureType": "road.local",
        "elementType": "geometry.stroke",
        "stylers": [{
          "color": "#d7d7d7"
        }]
      }, {
        "featureType": "poi",
        "elementType": "geometry.fill",
        "stylers": [{
          "visibility": "on"
        }, {
          "color": "#ebebeb"
        }]
      }, {
        "featureType": "administrative",
        "elementType": "geometry",
        "stylers": [{
          "color": "#a7a7a7"
        }]
      }, {
        "featureType": "road.arterial",
        "elementType": "geometry.fill",
        "stylers": [{
          "color": "#ffffff"
        }]
      }, {
        "featureType": "road.arterial",
        "elementType": "geometry.fill",
        "stylers": [{
          "color": "#ffffff"
        }]
      }, {
        "featureType": "landscape",
        "elementType": "geometry.fill",
        "stylers": [{
          "visibility": "on"
        }, {
          "color": "#efefef"
        }]
      }, {
        "featureType": "road",
        "elementType": "labels.text.fill",
        "stylers": [{
          "color": "#696969"
        }]
      }, {
        "featureType": "administrative",
        "elementType": "labels.text.fill",
        "stylers": [{
          "visibility": "on"
        }, {
          "color": "#737373"
        }]
      }, {
        "featureType": "poi",
        "elementType": "labels.icon",
        "stylers": [{
          "visibility": "off"
        }]
      }, {
        "featureType": "poi",
        "elementType": "labels",
        "stylers": [{
          "visibility": "off"
        }]
      }, {
        "featureType": "road.arterial",
        "elementType": "geometry.stroke",
        "stylers": [{
          "color": "#d6d6d6"
        }]
      }, {
        "featureType": "road",
        "elementType": "labels.icon",
        "stylers": [{
          "visibility": "off"
        }]
      }, {}, {
        "featureType": "poi",
        "elementType": "geometry.fill",
        "stylers": [{
          "color": "#dadada"
        }]
      }]
    });
    fetchLocations().then(function () {
      setMarkers(map);
    });
  }
}
function fetchLocations() {
  return new Promise(function (resolve, reject) {
    fetch('https://elbilio-admin-server.herokuapp.com/open-locations').then(function (response) {
      return response.json();
    }).then(function (data) {
      data.map(function (location) {
        var locationObject = {
          id: location.id,
          name: location.name,
          longitude: location.longitude,
          latitude: location.latitude,
          description: location.description ? location.description : "",
          imageUrl: location.imageUrl,
          vehicles: location.vehicles.map(function (vehicle) {
            return {
              name: vehicle.name,
              description: vehicle.description ? vehicle.description : ""
            };
          })
        };
        locations.push(locationObject);
      });
      resolve();
    }).catch(function (error) {
      return reject(error);
    });
  });
}
function setMarkers(map) {
  var icon = {
    url: 'https://hemulkommunikation.se/permanent/elbilio/mapbox-icon.png',
    scaledSize: new google.maps.Size(50, 50)
  };
  var shape = {
    coords: [0, 0, 70, 70],
    type: 'rect'
  };
  locations.forEach(function (location) {
    var marker = new google.maps.Marker({
      position: {
        lat: location.latitude,
        lng: location.longitude
      },
      map: map,
      icon: icon,
      shape: shape,
      title: location.name,
      imageUrl: location.imageUrl
    });
    marker.addListener("click", function () {
      var vehiclesList = location.vehicles.map(function (vehicle) {
        return "<li>".concat(vehicle.name, " - ").concat(vehicle.description, "</li>");
      }).join('');
      var contentString = "<div class=\"popup\">\n                      <div class=\"weight-bold\">".concat(location.name, "</div>\n                      <ul>").concat(vehiclesList, "</ul>\n                      <img class=\"car-img\" src=").concat(location.imageUrl, " alt=\"Pool-bil\"/>\n                      <a href=\"https://intercom.help/elbiliohelpcenter/sv/collections/2568250-boka-hyra-och-ladda-fordonet\" class=\"btn btn-secondary btn-light-green\">BOKA</a>\n                      </div>");
      var infoWindow = new google.maps.InfoWindow({
        content: contentString
      });
      infoWindow.open(map, marker);
      map.addListener("click", function () {
        infoWindow.close();
      });
    });
  });
}
window.initMap = initMap;

//Ineractive map end
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImludmlld2FuaW1hdGlvbi4xLjAuanMiLCJlYXN5d2ViLmNvcmUuMS4wLmpzIiwicGFyYWxsYXhpdC5qcyIsImdsb2JhbC5qcyJdLCJuYW1lcyI6WyJpdmFvYmplY3RzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2hlY2tJVkFPYmplY3RzIiwieCIsImxlbmd0aCIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJoYXNBdHRyaWJ1dGUiLCJ0b3AiLCJ3aW5kb3ciLCJpbm5lckhlaWdodCIsImJvdHRvbSIsInJlbW92ZUF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJOb2RlTGlzdCIsInByb3RvdHlwZSIsImZvckVhY2giLCJjYWxsYmFjayIsInRoaXNBcmciLCJpIiwiY2FsbCIsIkVhc3l3ZWIiLCJ2ZXJzaW9uIiwiaW5pdCIsIm9wdGlvbnMiLCJzZXRPcHRpb25zIiwiaW5pdENvb2tpZUZ1bmN0aW9uYWxpdHkiLCJyZWdpc3RlclRvZ2dsZXJzIiwicmVnaXN0ZXJBdXRvTG9hZCIsInJlZ2lzdGVyQ2xpY2tMb2FkIiwicmVnaXN0ZXJGb3JtRnVuY3Rpb25zIiwicmVnaXN0ZXJFd3NJbnN0YWdyYW0iLCJyZWdpc3RlckV3c1BvbnR5IiwicHJpdmFjeUNvb2tpZU5hbWUiLCJyZW1vdmVDb29raWVCYXIiLCJjb29raWVDb250YWluZXJFbGVtZW50Iiwib25SZW1vdmVCdXR0b25DbGljayIsImVsIiwiY29va2llVG9BZGQiLCJEYXRlIiwibm93IiwidG9HTVRTdHJpbmciLCJjb29raWUiLCJzZXRBdHRyaWJ1dGUiLCJpbmRleE9mIiwiZ2V0RWxlbWVudEJ5SWQiLCJjb29raWVCdXR0b25FbGVtZW50IiwiZGVsYXllZEZ1bmN0aW9ucyIsImRlbGF5ZWQiLCJvbkRlbGF5ZWQiLCJmdW5jdGlvblRvUnVuIiwicnVuRGVsYXllZCIsImN1cnJlbnRTY3JvbGxQb3NpdGlvbiIsInNjcm9sbFkiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJzZXRUaW1lb3V0IiwiYm9keSIsImNsaWVudEhlaWdodCIsInB1c2giLCJpbkRlYnVnIiwiYWxiYXRyb3NzSW5EZWJ1ZyIsInVuZGVmaW5lZCIsImlzRW1haWwiLCJlbWFpbEFkZHJlc3MiLCJwYXR0ZXJuIiwiUmVnRXhwIiwidGVzdCIsImRlZmF1bHRPcHRpb25zIiwibG9hZGVyTWFya3VwIiwia2V5Iiwic3RvcmFnZSIsImlzU3VwcG9ydGVkIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInZhbCIsInJlbW92ZUl0ZW0iLCJnZXRJdGVtIiwiaHR0cEdldCIsInVybCIsInJlc3BvbnNlQ2FsbGJhY2siLCJlcnJvckNhbGxiYWNrIiwiYWpheCIsIlhNTEh0dHBSZXF1ZXN0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsImNhY2hlQnJlYWtlciIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwic2VuZCIsImN1cnJlbnRQYWdlIiwiYXV0b1Njcm9sbENhbGxFbGVtZW50Iiwib25GcmFtZSIsIm9uU2Nyb2xsIiwidGhyb3R0bGVkIiwiYXV0b1Njcm9sbExvYWRpbmciLCJyZWFjaGVkRW5kT2ZJdGVtcyIsImxhc3RFbGVtZW50UG9zRnJvbVRvcCIsInJlcXVlc3RVcmwiLCJnZXRBdHRyaWJ1dGUiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwiYXV0b1Njcm9sbEtleSIsImN1cnJlbnRDb3VudCIsIml0ZW1Db250YWluZXIiLCJpdGVtU2VsZWN0b3IiLCJyZXNwb25zZSIsImxvYWRlZEl0ZW1zIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQiLCJyZXNwb25zZVRleHQiLCJjaGlsZE5vZGVzIiwiYXBwZW5kQ2hpbGQiLCJzY3JvbGxCeSIsInF1ZXJ5U2VsZWN0b3IiLCJ5IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiY2xpY2tMb2FkRWxlbWVudCIsImNsaWNrTG9hZGluZyIsImxvYWRLZXkiLCJjbGljayIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImZpbmQiLCJ4aHIiLCJzZXRBY3RpdmUiLCJhIiwic2V0SW5hY3RpdmUiLCJyZW1vdmUiLCJpbnB1dHMiLCJ2YWx1ZSIsInNpYmxpbmdzIiwiY3MiLCJnZXRDb21wdXRlZFN0eWxlIiwic3R5bGUiLCJoZWlnaHQiLCJzY3JvbGxIZWlnaHQiLCJwYXJzZUludCIsImdldFByb3BlcnR5VmFsdWUiLCJzZWwiLCJjYiIsIm1hdGNoZXMiLCJ0YXJnZXRzIiwicGFyZW50Tm9kZSIsImNoaWxkcmVuIiwidGFyZ2V0Iiwibm9kZSIsImVsZW1lbnRzIiwidGFyZ2V0U2VsZWN0b3IiLCJ0YXJnZXROb2RlcyIsInRhcmdldEVsIiwidG9nZ2xlQ2xhc3MiLCJlbGVtZW50IiwiY3NzQ2xhc3MiLCJzdG9yYWdlS2V5IiwidG9nZ2xlVmFsIiwiY29udGFpbnMiLCJiaW5kRXdzTG9hZCIsInRlbXBsYXRlS2V5IiwiY29uc29sZSIsIndhcm4iLCJ1cmxQYXRoIiwidXNlSnNvbkFwaSIsImlubmVySFRNTCIsImVyciIsImVycm9yIiwicXVlcnlBdHRyaWJ1dGVOYW1lIiwicGFyYWxsYXhJdCIsInBhcmVudCIsIm1vdmVtZW50IiwicmVsWCIsInBhZ2VYIiwib2Zmc2V0IiwibGVmdCIsInJlbFkiLCJwYWdlWSIsIm9mZnNldFdpZHRoIiwib2Zmc2V0SGVpZ2h0Iiwic2V0UHJvcGVydHkiLCJzY3JvbGxMZWZ0IiwicGFnZVhPZmZzZXQiLCJwYWdlWU9mZnNldCIsInBhcmFsbGF4SXRlbSIsImNoaWxkIiwic3BlZWQiLCJyZW1TcGVlZCIsIiQiLCJtb3VzZW1vdmUiLCJtb3VzZWxlYXZlIiwiaGFtYnVyZ2VyIiwiaGVyb0NvbnRlbnQiLCJzdWJtZW51IiwiZHJvcGRvd24iLCJuYXYiLCJ0b2dnbGUiLCJidXJnZXIiLCJ0YWdCdG5zIiwibmV3c0l0ZW1zIiwiYnRuIiwiYXJ0aWNsZSIsImhyZWYiLCJpbmNsdWRlcyIsImxpbmsiLCJjcmVhdGVMaW5rIiwiaXRlbSIsInRleHQiLCJjcmVhdGVUZXh0Iiwic2Nyb2xsSW50b1ZpZXciLCJjb2xvciIsImhvdmVyQ29sb3IiLCJjcmVhdGVFbGVtZW50IiwidGV4dENvbnRlbnQiLCJwYWRkaW5nIiwidGV4dERlY29yYXRpb24iLCJ0cmFuc2l0aW9uIiwiZXZlbnQiLCJzY3JvbGxEb3duIiwicCIsImN1cnJlbnRQb3NpdGlvbiIsIm5ld1Bvc2l0aW9uIiwic2Nyb2xsVG8iLCJsb2NhdGlvbnMiLCJpbml0TWFwIiwibWFwRWxlbWVudCIsIm1hcCIsImdvb2dsZSIsIm1hcHMiLCJNYXAiLCJ6b29tIiwiY2VudGVyIiwibGF0IiwibG5nIiwic3R5bGVzIiwiZmV0Y2hMb2NhdGlvbnMiLCJ0aGVuIiwic2V0TWFya2VycyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZmV0Y2giLCJqc29uIiwiZGF0YSIsImxvY2F0aW9uT2JqZWN0IiwiaWQiLCJuYW1lIiwibG9uZ2l0dWRlIiwibGF0aXR1ZGUiLCJkZXNjcmlwdGlvbiIsImltYWdlVXJsIiwidmVoaWNsZXMiLCJ2ZWhpY2xlIiwiY2F0Y2giLCJpY29uIiwic2NhbGVkU2l6ZSIsIlNpemUiLCJzaGFwZSIsImNvb3JkcyIsInR5cGUiLCJtYXJrZXIiLCJNYXJrZXIiLCJwb3NpdGlvbiIsInRpdGxlIiwiYWRkTGlzdGVuZXIiLCJ2ZWhpY2xlc0xpc3QiLCJqb2luIiwiY29udGVudFN0cmluZyIsImluZm9XaW5kb3ciLCJJbmZvV2luZG93IiwiY29udGVudCIsImNsb3NlIl0sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQSxZQUFBO0VBQ0EsSUFBQUEsVUFBQSxHQUFBQyxRQUFBLENBQUFDLGdCQUFBLENBQUEsd0JBQUEsQ0FBQTtFQUVBLFNBQUFDLGVBQUEsR0FBQTtJQUVBLEtBQUEsSUFBQUMsQ0FBQSxHQUFBLENBQUEsRUFBQUEsQ0FBQSxHQUFBSixVQUFBLENBQUFLLE1BQUEsRUFBQUQsQ0FBQSxFQUFBLEVBQUE7TUFDQSxJQUFBRSxJQUFBLEdBQUFOLFVBQUEsQ0FB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QUdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsSUFBQUUsU0FBQSxHQUFBLEVBQUE7QUFFQSxTQUFBQyxPQUFBLEdBQUE7RUFDQSxJQUFBQyxVQUFBLEdBQUFsTyxRQUFBLENBQUErQyxjQUFBLENBQUEsS0FBQSxDQUFBO0VBRUEsSUFBQW1MLFVBQUEsS0FBQSxJQUFBLEVBQUE7SUFDQSxJQUFBQyxHQUFBLEdBQUEsSUFBQUMsTUFBQSxDQUFBQyxJQUFBLENBQUFDLEdBQUEsQ0FBQUosVUFBQSxFQUFBO01BQ0FLLElBQUEsRUFBQSxFQUFBO01BQ0FDLE1BQUEsRUFBQTtRQUFBQyxHQUFBLEVBQUEsaUJBQUE7UUFBQUMsR0FBQSxFQUFBO01BQUEsQ0FBQTtNQUNBQyxNQUFBLEVBQUEsQ0FDQTtRQUNBLGFBQUEsRUFBQSxPQUFBO1FBQ0EsYUFBQSxFQUFBLGVBQUE7UUFDQSxTQUFBLEVBQUEsQ0FDQTtVQUNBLE9BQUEsRUFBQTtRQUNBLENBQUE7TUFFQSxDQUFBLEVBQ0E7UUFDQSxhQUFBLEVBQUEsU0FBQTtRQUNBLFNBQUEsRUFBQSxDQUNBO1VBQ0EsT0FBQSxFQUFBO1FBQ0EsQ0FBQSxFQUNBO1VBQ0EsWUFBQSxFQUFBO1FBQ0EsQ0FBQTtNQUVBLENBQUEsRUFDQTtRQUNBLGFBQUEsRUFBQSxjQUFBO1FBQ0EsYUFBQSxFQUFBLGlCQUFBO1FBQ0EsU0FBQSxFQUFBLENBQ0E7VUFDQSxZQUFBLEVBQUE7UUFDQSxDQUFBLEVBQ0E7VUFDQSxPQUFBLEVBQUE7UUFDQSxDQUFBO01BRUEsQ0FBQSxFQUNBO1FBQ0EsYUFBQSxFQUFBLGNBQUE7UUFDQSxhQUFBLEVBQUEsZUFBQTtRQUNBLFNBQUEsRUFBQSxDQUNBO1VBQ0EsT0FBQSxFQUFBO1FBQ0EsQ0FBQTtNQUVBLENBQUEsRUFDQTtRQUNBLGFBQUEsRUFBQSxZQUFBO1FBQ0EsYUFBQSxFQUFBLGVBQUE7UUFDQSxTQUFBLEVBQUEsQ0FDQTtVQUNBLFlBQUEsRUFBQTtRQUNBLENBQUEsRUFDQTtVQUNBLE9BQUEsRUFBQTtRQUNBLENBQUEsRUFDQTtVQUNBLFFBQUEsRUFBQTtRQUNBLENBQUE7TUFFQSxDQUFBLEVBQ0E7UUFDQSxhQUFBLEVBQUEsWUFBQTtRQUNBLGFBQUEsRUFBQSxpQkFBQTtRQUNBLFNBQUEsRUFBQSxDQUNBO1VBQ0EsT0FBQSxFQUFBO1FBQ0EsQ0FBQTtNQUVBLENBQUEsRUFDQTtRQUNBLGFBQUEsRUFBQSxLQUFBO1FBQ0EsYUFBQSxFQUFBLGVBQUE7UUFDQSxTQUFBLEVBQUEsQ0FDQTtVQUNBLFlBQUEsRUFBQTtRQUNBLENBQUEsRUFDQTtVQUNBLE9BQUEsRUFBQTtRQUNBLENBQUE7TUFFQSxDQUFBLEVBQ0E7UUFDQSxhQUFBLEVBQUEsZ0JBQUE7UUFDQSxhQUFBLEVBQUEsVUFBQTtRQUNBLFNBQUEsRUFBQSxDQUNBO1VBQ0EsT0FBQSxFQUFBO1FBQ0EsQ0FBQTtNQUVBLENBQUEsRUFDQTtRQUNBLGFBQUEsRUFBQSxlQUFBO1FBQ0EsYUFBQSxFQUFBLGVBQUE7UUFDQSxTQUFBLEVBQUEsQ0FDQTtVQUNBLE9BQUEsRUFBQTtRQUNBLENBQUE7TUFFQSxDQUFBLEVBQ0E7UUFDQSxhQUFBLEVBQUEsZUFBQTtRQUNBLGFBQUEsRUFBQSxlQUFBO1FBQ0EsU0FBQSxFQUFBLENBQ0E7VUFDQSxPQUFBLEVBQUE7UUFDQSxDQUFBO01BRUEsQ0FBQSxFQUNBO1FBQ0EsYUFBQSxFQUFBLFdBQUE7UUFDQSxhQUFBLEVBQUEsZUFBQTtRQUNBLFNBQUEsRUFBQSxDQUNBO1VBQ0EsWUFBQSxFQUFBO1FBQ0EsQ0FBQSxFQUNBO1VBQ0EsT0FBQSxFQUFBO1FBQ0EsQ0FBQTtNQUVBLENBQUEsRUFDQTtRQUNBLGFBQUEsRUFBQSxNQUFBO1FBQ0EsYUFBQSxFQUFBLGtCQUFBO1FBQ0EsU0FBQSxFQUFBLENBQ0E7VUFDQSxPQUFBLEVBQUE7UUFDQSxDQUFBO01BRUEsQ0FBQSxFQUNBO1FBQ0EsYUFBQSxFQUFBLGdCQUFBO1FBQ0EsYUFBQSxFQUFBLGtCQUFBO1FBQ0EsU0FBQSxFQUFBLENBQ0E7VUFDQSxZQUFBLEVBQUE7UUFDQSxDQUFBLEVBQ0E7VUFDQSxPQUFBLEVBQUE7UUFDQSxDQUFBO01BRUEsQ0FBQSxFQUNBO1FBQ0EsYUFBQSxFQUFBLEtBQUE7UUFDQSxhQUFBLEVBQUEsYUFBQTtRQUNBLFNBQUEsRUFBQSxDQUNBO1VBQ0EsWUFBQSxFQUFBO1FBQ0EsQ0FBQTtNQUVBLENBQUEsRUFDQTtRQUNBLGFBQUEsRUFBQSxLQUFBO1FBQ0EsYUFBQSxFQUFBLFFBQUE7UUFDQSxTQUFBLEVBQUEsQ0FDQTtVQUNBLFlBQUEsRUFBQTtRQUNBLENBQUE7TUFFQSxDQUFBLEVBQ0E7UUFDQSxhQUFBLEVBQUEsZUFBQTtRQUNBLGFBQUEsRUFBQSxpQkFBQTtRQUNBLFNBQUEsRUFBQSxDQUNBO1VBQ0EsT0FBQSxFQUFBO1FBQ0EsQ0FBQTtNQUVBLENBQUEsRUFDQTtRQUNBLGFBQUEsRUFBQSxNQUFBO1FBQ0EsYUFBQSxFQUFBLGFBQUE7UUFDQSxTQUFBLEVBQUEsQ0FDQTtVQUNBLFlBQUEsRUFBQTtRQUNBLENBQUE7TUFFQSxDQUFBLEVBQ0EsQ0FBQSxDQUFBLEVBQ0E7UUFDQSxhQUFBLEVBQUEsS0FBQTtRQUNBLGFBQUEsRUFBQSxlQUFBO1FBQ0EsU0FBQSxFQUFBLENBQ0E7VUFDQSxPQUFBLEVBQUE7UUFDQSxDQUFBO01BRUEsQ0FBQTtJQUVBLENBQUEsQ0FBQTtJQUVBQyxjQUFBLEVBQUEsQ0FBQUMsSUFBQSxDQUFBLFlBQUE7TUFDQUMsVUFBQSxDQUFBWCxHQUFBLENBQUE7SUFDQSxDQUFBLENBQUE7RUFDQTtBQUNBO0FBRUEsU0FBQVMsY0FBQSxHQUFBO0VBQ0EsT0FBQSxJQUFBRyxPQUFBLENBQUEsVUFBQUMsT0FBQSxFQUFBQyxNQUFBLEVBQUE7SUFDQUMsS0FBQSxDQUFBLDJEQUFBLENBQUEsQ0FDQUwsSUFBQSxDQUFBLFVBQUFoSSxRQUFB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QSxFQUFBa0MsTUFBQSxDQUFBO01BRUFsQyxHQUFBLENBQUFzQyxXQUFBLENBQUEsT0FBQSxFQUFBLFlBQUE7UUFDQUksVUFBQSxDQUFBRyxLQUFBLEVBQUE7TUFDQSxDQUFBLENBQUE7SUFDQSxDQUFBLENBQUE7RUFDQSxDQUFBLENBQUE7QUFDQTtBQUVBdlEsTUFBQSxDQUFBd04sT0FBQSxHQUFBQSxPQUFBOztBQUVBIiwiZmlsZSI6ImZpbmFsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vXHJcbi8vIEludmlld2FuaW1hdGlvblxyXG4vLyB2MS4wIC0gKGJ5IElzYWs/KVxyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBpdmFvYmplY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWludmlld2FuaW1hdGlvbl1cIik7XHJcblxyXG4gICAgZnVuY3Rpb24gY2hlY2tJVkFPYmplY3RzKCkge1xyXG5cclxuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGl2YW9iamVjdHMubGVuZ3RoOyB4KyspIHtcclxuICAgICAgICAgICAgdmFyIHJlY3QgPSBpdmFvYmplY3RzW3hdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICBpZiAoaXZhb2JqZWN0c1t4XS5oYXNBdHRyaWJ1dGUoXCJkYXRhLWludmlld2FuaW1hdGlvblwiKSAmJiByZWN0LnRvcCA8IHdpbmRvdy5pbm5lckhlaWdodCAmJiByZWN0LmJvdHRvbSA+IDApIHtcclxuICAgICAgICAgICAgICAgIGl2YW9iamVjdHNbeF0ucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1pbnZpZXdhbmltYXRpb25cIik7XHJcbiAgICAgICAgICAgICAgICBpdmFvYmplY3RzW3hdLmNsYXNzTGlzdC5hZGQoXCJpbnZpZXdcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjaGVja0lWQU9iamVjdHMoKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgY2hlY2tJVkFPYmplY3RzLCBmYWxzZSk7XHJcbn0pKCk7IiwiLy8gUG9seWZpbGwgdG8gZW5hYmxlIC5mb3JFYWNoIGZyb20gLnF1ZXJ5U2VsZWN0b3JBbGwgaW4gb2xkZXIgSUUtYnJvd3NlcnNcclxuaWYgKHdpbmRvdy5Ob2RlTGlzdCAmJiAhTm9kZUxpc3QucHJvdG90eXBlLmZvckVhY2gpIHtcclxuICAgIE5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgdGhpc0FyZyA9IHRoaXNBcmcgfHwgd2luZG93O1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHRoaXNbaV0sIGksIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbnZhciBFYXN5d2ViID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgdmFyIHZlcnNpb24gPSBcIjEuNlwiO1xyXG5cclxuICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgLy8gU2V0IG9wdGlvbnMgaWYgcHJvdmlkZWRcclxuICAgICAgICAvL1xyXG4gICAgICAgIHNldE9wdGlvbnMob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIC8vIFJ1bnMgdGhlIGNvb2tpZSBiYXIgaGFuZGxlciBzY3JpcHQgaW1tZWRpYXRlbHlcclxuICAgICAgICAvL1xyXG4gICAgICAgIGluaXRDb29raWVGdW5jdGlvbmFsaXR5KCk7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemVzIHNpbXBsZSB0b29nbGUgbW9kZSB3aXRoOlxyXG4gICAgICAgIC8vIGV3LXRvZ2dsZT1cImNsYXNzbmFtZVwiXHJcbiAgICAgICAgLy9cclxuICAgICAgICByZWdpc3RlclRvZ2dsZXJzKCk7XHJcblxyXG4gICAgICAgIC8vIFJlZ2lzdHJlcmFyIG3DtmpsaWdoZXQgZsO2ciBlbiBcInNjcm9sbC1sb2FkXCItZnVua3Rpb24gdmlkIGzDpW5nYSBsaXN0b3IgZsO2ciBcImF1dG8tcGFnaW5nXCJcclxuICAgICAgICAvLyAoZsO2bGphbmRlIFggYW50YWwgc2F0dCBpIGJ5Z2dhcmVuIGFwcGVuZGFzIHRpbGwgbGlzdGFuIG7DpHIgZW5zIHNjcm9sbCBuw6RybWFyIHNpZyBib3R0ZW4pXHJcbiAgICAgICAgLy9cclxuICAgICAgICByZWdpc3RlckF1dG9Mb2FkKCk7XHJcblxyXG4gICAgICAgIC8vIFJlZ2lzdHJlcmFyIG3DtmpsaWdoZXQgZsO2ciBlbiBcImtsaWNrLWxvYWRcIi1rbmFwcCB2aWQgbMOlbmdhIGxpc3RvciBmw7ZyIFwiYXV0by1wYWdpbmdcIlxyXG4gICAgICAgIC8vIChmw7ZsamFuZGUgWCBhbnRhbCBzYXR0IGkgYnlnZ2FyZW4gYXBwZW5kYXMgdGlsbCBsaXN0YW4gbsOkciBtYW4ga2xpY2thciBww6UgZW4ga25hcHAsIGV4LiBcIkxhZGRhIGZsZXJcIilcclxuICAgICAgICAvL1xyXG4gICAgICAgIHJlZ2lzdGVyQ2xpY2tMb2FkKCk7XHJcblxyXG4gICAgICAgIC8vIC5zdGF0ZS0tYWN0aXZlIGbDtnIgbGFiZWxzIG9jaCBhdXRvLXJlc2l6ZSBmw7ZyIHRleHRhcmVhXHJcbiAgICAgICAgLy9cclxuICAgICAgICByZWdpc3RlckZvcm1GdW5jdGlvbnMoKTtcclxuXHJcbiAgICAgICAgLy8gSW5zdGFncmFtLWtvbXBvbmVudC1sb2FkZXIgc29tIGjDpG10YXIgaW5zdGFncmFtLWlubmVow6VsbCBtZWQgYWpheCBmw7ZyIGVmdGVyIGF0dCBzaWRhbiBsYWRkYXRzIGluIG9tIGtvbXBvbmVudGVuIGZpbm5zXHJcbiAgICAgICAgLy8gU2U6IGh0dHBzOi8vZ2l0bGFiLnNwaGlueC5zZS9hbGJhdHJvc3MvYWxiYXRyb3NzLXNvdXJjZS8tL3RyZWUvbWFzdGVyL1BsdWdpbnMvQWxiYXRyb3NzLlBsdWdpbnMuSW5zdGFncmFtXHJcbiAgICAgICAgLy9cclxuICAgICAgICByZWdpc3RlckV3c0luc3RhZ3JhbSgpO1xyXG5cclxuICAgICAgICAvLyBQb250eS1rb21wb25lbnQtbG9hZGVyIHNvbSBow6RtdGFyIHBvbnR5LWpvYnMgbWVkIGFqYXggZsO2ciBlZnRlciBhdHQgc2lkYW4gbGFkZGF0cyBpbiBvbSBrb21wb25lbnRlbiBmaW5uc1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgcmVnaXN0ZXJFd3NQb250eSgpXHJcbiAgICB9O1xyXG5cclxuICAgIC8vI3JlZ2lvbiAtIENvbnNlbnQgY29va2llIC1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFBsb2NrYXIgdXBwIGtsaWNrIHDDpSBrYWthbnMga25hcHAsIHPDpHR0ZXIga2FrYSBmw7ZyIGF0dCByZWdpc3RyZXJhIGF0dCBkZW4ga2xpY2thdHMgcMOlLCB0YXIgc2VkYW4gYm9ydCBrbGFzc2VuICdoaWRkZW4nIGZyw6VuIGthay1jb250YWluZXJuIG9tIGtha2EgcmVkYW4gZmlubnNcclxuICAgICAqICovXHJcbiAgICB2YXIgaW5pdENvb2tpZUZ1bmN0aW9uYWxpdHkgPSAoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICB2YXIgcHJpdmFjeUNvb2tpZU5hbWUgPSBcIkVXLlByaXZhY3kuQ29uc2VudFwiO1xyXG4gICAgICAgIHZhciByZW1vdmVDb29raWVCYXIgPSBmdW5jdGlvbiAoY29va2llQ29udGFpbmVyRWxlbWVudCkge1xyXG4gICAgICAgICAgICB2YXIgb25SZW1vdmVCdXR0b25DbGljayA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvb2tpZVRvQWRkID0gcHJpdmFjeUNvb2tpZU5hbWUgKyAnPXllcztleHBpcmVzPScgKyBuZXcgRGF0ZShEYXRlLm5vdygpICsgKDM2NSAqIDI0ICogNjAgKiA2MCAqIDEwMDApKS50b0dNVFN0cmluZygpICsgJztwYXRoPS87c2FtZXNpdGU9bGF4JztcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZVRvQWRkO1xyXG4gICAgICAgICAgICAgICAgY29va2llQ29udGFpbmVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gb25SZW1vdmVCdXR0b25DbGljaztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAoZG9jdW1lbnQuY29va2llICYmIGRvY3VtZW50LmNvb2tpZS5pbmRleE9mKHByaXZhY3lDb29raWVOYW1lKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBjb29raWVDb250YWluZXJFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V3LWNvb2tpZWluZm8tY29udGFpbmVyJyk7XHJcbiAgICAgICAgaWYgKCFjb29raWVDb250YWluZXJFbGVtZW50KVxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIHZhciBjb29raWVCdXR0b25FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V3LWNvb2tpZWluZm8tYnV0dG9uLW9rJyk7XHJcbiAgICAgICAgaWYgKCFjb29raWVCdXR0b25FbGVtZW50KVxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIGNvb2tpZUJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZW1vdmVDb29raWVCYXIoY29va2llQ29udGFpbmVyRWxlbWVudCksIGZhbHNlKTtcclxuXHJcbiAgICAgICAgY29va2llQ29udGFpbmVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJycpO1xyXG5cclxuICAgIH0pO1xyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIC0gUnVuIGRlbGF5ZWQgLVxyXG4gICAgdmFyIGRlbGF5ZWRGdW5jdGlvbnMgPSBbXTtcclxuICAgIHZhciBkZWxheWVkID0gZmFsc2U7XHJcbiAgICAvKiogXHJcbiAgICAgS8O2ciBzYW10bGlnYSByZWdpc3RyZXJhZGUgZGVsYXllZCBmdW5jdGlvbnMgb2NoIGF2dnJlZ2lzdHJlcmFyIGRlbSBzZWRhbi5cclxuICAgICAqL1xyXG4gICAgdmFyIG9uRGVsYXllZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoZGVsYXllZEZ1bmN0aW9ucy5sZW5ndGggPT09IDApXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgZGVsYXllZEZ1bmN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChmdW5jdGlvblRvUnVuKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZnVuY3Rpb25Ub1J1biA9PT0gJ2Z1bmN0aW9uJylcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uVG9SdW4oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkZWxheWVkRnVuY3Rpb25zID0gW107XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVnaXN0cmVyYXIgZW4gZnVua3Rpb24gYXR0IGvDtnJhIGRlbGF5ZWQsIFxyXG4gICAgICogdmlsa2V0IGlubmViw6RyIGF0dCBkZW4ga8O2cnMgZsO2cnN0IHDDpSBmw7Zyc3RhIHNjcm9sbCwgYWx0LiBvbSBzaWRhbiBsYWRkYXRzIG9tIGVmdGVyIHNjcm9sbCBvY2ggc2Nyb2xsLXRvcCBpbnRlIMOkciAwIGVmdGVyIDUwMG1zXHJcbiAgICAgKiBAcGFyYW0ge2FueX0gZnVuY3Rpb25Ub1J1biBGdW5rdGlvbmVuIHNvbSBrb21tZXIgYXR0IGvDtnJhcyB2aWQgc2Nyb2xsIGVsbGVyIG9tIHJlZGFuIHNjcm9sbC5cclxuICAgICAqL1xyXG4gICAgdmFyIHJ1bkRlbGF5ZWQgPSBmdW5jdGlvbiAoZnVuY3Rpb25Ub1J1bikge1xyXG4gICAgICAgIC8vIExhZGRhciB2aSBpbiBzaWRhbiBcInNjcm9sbGFkXCIgKHJlbG9hZCkga8O2cnMgZnVua3Rpb25lbiBkaXJla3QgZWZ0ZXIgNTAwbXNcclxuICAgICAgICAvL1xyXG4gICAgICAgIHZhciBjdXJyZW50U2Nyb2xsUG9zaXRpb24gPSB3aW5kb3cuc2Nyb2xsWSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xyXG4gICAgICAgIGlmIChjdXJyZW50U2Nyb2xsUG9zaXRpb24gPiAwKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZnVuY3Rpb25Ub1J1biA9PT0gJ2Z1bmN0aW9uJylcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvblRvUnVuKCk7XHJcbiAgICAgICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQgPCB3aW5kb3cuaW5uZXJIZWlnaHQpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBmdW5jdGlvblRvUnVuID09PSAnZnVuY3Rpb24nKVxyXG4gICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uVG9SdW4oKTtcclxuICAgICAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFubmFycyByZWdpc3RyZXJhciB2aSBkbmUgc29tIGVuIGRlbGF5ZWQgZnVua3Rpb25cclxuICAgICAgICAvL1xyXG4gICAgICAgIGRlbGF5ZWRGdW5jdGlvbnMucHVzaChmdW5jdGlvblRvUnVuKTtcclxuXHJcbiAgICAgICAgLy8gT20gdmkgaW50ZSByZWRhbiBtYXJrZXJhdCBhdHQgZGVsYXkgw6RyIGkgcGxheSwgbWFya2VyYXIgdmkgZGV0LCBvY2ggcmVnaXN0cmVyYXIgYXR0IG9uRGVsYXllZCgpIHNrYSBrw7ZyYXMgcMOlIHNjcm9sbC5cclxuICAgICAgICAvL1xyXG4gICAgICAgIGlmICghZGVsYXllZCkge1xyXG4gICAgICAgICAgICBkZWxheWVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgb25EZWxheWVkKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdmFyYXIgbWVkIGh1cnV2aWRhIGRlYnVnLWzDpGdldCDDpHIgYWt0aXZlcmF0IHVuZGVyIGvDtnJuaW5nIChvZnRhIGVuYmFydCB2aWQgdXR2Y2tsaW5nKVxyXG4gICAgICogKi9cclxuICAgIHZhciBpbkRlYnVnID0gd2luZG93LmFsYmF0cm9zc0luRGVidWcgIT09IHVuZGVmaW5lZCA/IHdpbmRvdy5hbGJhdHJvc3NJbkRlYnVnIDogZmFsc2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBLb250cm9sbGVyYXIgb20gYW5naXZldCBhcmd1bWVudCDDpHIgZW4gZ2lsdGlnIGUtcG9zdGFkcmVzc1xyXG4gICAgICogQHBhcmFtIHthbnl9IGVtYWlsQWRkcmVzcyBFLXBvc3RhZHJlc3MgYXR0IGtvbnRyb2xsZXJcclxuICAgICAqL1xyXG4gICAgdmFyIGlzRW1haWwgPSBmdW5jdGlvbiAoZW1haWxBZGRyZXNzKSB7XHJcbiAgICAgICAgdmFyIHBhdHRlcm4gPSBuZXcgUmVnRXhwKC9eKFthLXpBLVowLTlfListXSkrXFxAKChbYS16QS1aMC05LV0pK1xcLikrKFthLXpBLVowLTldezIsNH0pKyQvKTtcclxuICAgICAgICByZXR1cm4gcGF0dGVybi50ZXN0KGVtYWlsQWRkcmVzcyk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBkZWZhdWx0T3B0aW9ucyA9IHtcclxuICAgICAgICBsb2FkZXJNYXJrdXA6IFwiPGRpdiBjbGFzcz0nZm9ybS1sb2FkZXInPjxpIGNsYXNzPSdldy1sb2FkZXInPjxpPjwvaT48L2k+PC9kaXY+XCJcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHNldE9wdGlvbnMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIGlmIChvcHRpb25zID09PSB1bmRlZmluZWQgfHwgdHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgZGVmYXVsdE9wdGlvbnNba2V5XSA9IG9wdGlvbnNba2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRPcHRpb25zO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEVua2VsIGxvY2Fsc3RvcmFnZS1oZWxwZXIgdmlhIEVhc3l3ZWIuc3RvcmFnZS5zZXRJdGVtIHNhbXQgRWFzeXdlYi5zdG9yYWdlLmdldEl0ZW0uXHJcbiAgICAgKiBBbnbDpG5kcyBtZWQgZsO2cmRlbCBmw7ZyIGF0dCB2aWQgc2VuYXJlIHRpbGxmw6RsbGUgdXBwZGF0ZXJhIGZyw6VuIGxvY2FsU3RvcmFnZSB0aWxsIGZyYW10aWRhIG1lciBlZmZla3RpdmEgc3RvcmFnZS1sw7ZzbmluZ2FyXHJcbiAgICAgKiAqL1xyXG4gICAgdmFyIHN0b3JhZ2UgPSB7XHJcbiAgICAgICAgaXNTdXBwb3J0ZWQ6IFwibG9jYWxTdG9yYWdlXCIgaW4gd2luZG93ICYmIG51bGwgIT09IHdpbmRvdy5sb2NhbFN0b3JhZ2UsXHJcbiAgICAgICAgc2V0SXRlbTogZnVuY3Rpb24gKGtleSwgdmFsKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1N1cHBvcnRlZCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZiAoa2V5ID09PSBudWxsIHx8IGtleSA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRJdGVtOiBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1N1cHBvcnRlZCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRW5rZWwgYWpheC1sYWRkYXJlIGbDtnIgYXR0IGjDpG10YSBlbiB1cmwgb2NoIHNwZWNpZmljZXJhIGNhbGxiYWNrIGbDtnIgc3VjY2VzcyBzYW10IGVycm9yLlxyXG4gICAgICogRnLDpG1zdCBtZW5hZCBhdHQgZW5rZWx0IGJ5Z2dhIGJvcnQgalF1ZXJ5LWJlcm9lbmRlbi4gSW5rbHVkZXJhciBjYWNoZS1icmVha2VyLlxyXG4gICAgICogQHBhcmFtIHthbnl9IHVybCBVcmwgYXR0IGFucm9wXHJcbiAgICAgKiBAcGFyYW0ge2FueX0gcmVzcG9uc2VDYWxsYmFjayBDYWxsYmFjayBzb20gYW5yb3BhcyB2aWQgbHlja2F0IGFucm9wLiBBbnJvcGFzIG1lZCBoZWxhIHJlc3BvbnNldCAocmVxdWVzdGV0KSBzb20gYXJndW1lbnQuXHJcbiAgICAgKiBAcGFyYW0ge2FueX0gZXJyb3JDYWxsYmFjayAvLyBDYWxsYmFjayBzb20gYW5yb3BhcyB2aWQgbWlzc2x5Y2thdCBhbnJvcC4gQW5yb3BhcyBtZWQgaGVsYSByZXNwb25zZXQgKHJlcXVlc3RldCkgc29tIGFyZ3VtZW50LlxyXG4gICAgICovXHJcbiAgICB2YXIgaHR0cEdldCA9IGZ1bmN0aW9uICh1cmwsIHJlc3BvbnNlQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgYWpheCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgIGFqYXgub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSA0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKHJlc3BvbnNlQ2FsbGJhY2spICE9PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VDYWxsYmFjayh0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKGVycm9yQ2FsbGJhY2spICE9PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JDYWxsYmFjayh0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBjYWNoZUJyZWFrZXIgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIHVybCArPSB1cmwuaW5kZXhPZihcIj9cIikgPiAtMSA/IChcIiZqcT1cIiArIGNhY2hlQnJlYWtlcikgOiAoXCI/anE9XCIgKyBjYWNoZUJyZWFrZXIpO1xyXG5cclxuICAgICAgICBhamF4Lm9wZW4oXCJHRVRcIiwgdXJsLCB0cnVlKTtcclxuICAgICAgICBhamF4LnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xyXG4gICAgICAgIGFqYXguc2V0UmVxdWVzdEhlYWRlcihcIlgtUmVxdWVzdGVkLVdpdGhcIiwgXCJYTUxIdHRwUmVxdWVzdFwiKTtcclxuICAgICAgICBhamF4LnNlbmQoKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIFBhZ2VyIGNvdW50ZXIgdG8ga25vdyBob3cgbXVjaCB3ZSBoYXZlIGFuZCBzaG91bGQgbG9hZFxyXG4gICAgLy8gTm90aXM6IFN0YXRpc2sgPSBmdW5nZXJhciBicmEgZsO2ciBlbiBwZXIgcGFnZSBsb2FkLiBCw7ZyIGZha3RvcmVyYXMgb20uXHJcbiAgICB2YXIgY3VycmVudFBhZ2UgPSAxO1xyXG5cclxuICAgIC8vICNyZWdpb24gLSBBdXRvIGxvYWQgb24gc2Nyb2xsIC1cclxuICAgIHZhciByZWdpc3RlckF1dG9Mb2FkID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAvLyBRdWljayAmIGRpcnR5IGVsZW1lbnQgY2hlb24gdG8gc2VlIHdoZXRoZXIgd2Ugc2hvdWxkIHVzZSBzY3JvbGwgbG9hZFxyXG4gICAgICAgIHZhciBhdXRvU2Nyb2xsQ2FsbEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNjcm9sbC1sb2FkXCIpO1xyXG5cclxuICAgICAgICBpZiAoYXV0b1Njcm9sbENhbGxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBhdXRvU2Nyb2xsS2V5ID0gXCI/a2V5PVwiICsgYXV0b1Njcm9sbENhbGxFbGVtZW50LmdldEF0dHJpYnV0ZShcImxvYWQta2V5XCIpO1xyXG4gICAgICAgICAgICB2YXIgYXV0b1Njcm9sbExvYWRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIC8vIENvbnRhaW5lciBmb3IgYWxsIGl0ZW1zICh3aWxsIGJlIGFwcGVuZGVkIHRvKVxyXG4gICAgICAgICAgICB2YXIgaXRlbUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYXV0by1sb2FkLWNvbnRhaW5lclwiKTtcclxuICAgICAgICAgICAgLy8gRWFjaCBpbmRpdmlkdWFsIGl0ZW0sIHRvIGNvdW50XHJcbiAgICAgICAgICAgIHZhciBpdGVtU2VsZWN0b3IgPSBcIi5hdXRvLWxvYWQtaXRlbVwiO1xyXG5cclxuICAgICAgICAgICAgLy8gV2hldGhlciB0aGUgYmFjayBpcyBvdXQgb2YgaXRlbXMgdG8gZGVsaXZlclxyXG4gICAgICAgICAgICB2YXIgcmVhY2hlZEVuZE9mSXRlbXMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBsYXN0RWxlbWVudFBvc0Zyb21Ub3AgPSAwO1xyXG4gICAgICAgICAgICB2YXIgdGhyb3R0bGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvLyBPbiBzY3JvbGxcclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBsYXN0RWxlbWVudFBvc0Zyb21Ub3AgPSBhdXRvU2Nyb2xsQ2FsbEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkueSAtIHdpbmRvdy5pbm5lckhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRocm90dGxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUob25GcmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3R0bGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRnJhbWUoKSB7XHJcbiAgICAgICAgICAgICAgICBvblNjcm9sbCgpO1xyXG4gICAgICAgICAgICAgICAgdGhyb3R0bGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gb25TY3JvbGwoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIGlmIHdlJ3JlIG91dCBvZiBpdGVtcyBvciBpcyBhbHJlYWR5IGxvYWRpbmcgYW4gaXRlbSBiYXRjaFxyXG4gICAgICAgICAgICAgICAgaWYgKGF1dG9TY3JvbGxMb2FkaW5nIHx8IHJlYWNoZWRFbmRPZkl0ZW1zKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdEVsZW1lbnRQb3NGcm9tVG9wIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE1hcmsgdGhhdCB3ZSdyZSBsb2FkaW5nIGEgYmF0Y2hcclxuICAgICAgICAgICAgICAgICAgICBhdXRvU2Nyb2xsTG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSW5jcmVhc2UgdGhlIGN1cnJlbnQgcGFnZXIgcGFnZSBsb2FkZWRcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZSsrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBEaXJ0eSB1cmwgY3JlYXRpb24gZm9yIHRoZSBhamF4IGVuZHBvaW50XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcXVlc3RVcmwgPSBhdXRvU2Nyb2xsQ2FsbEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSB8fCB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSG9tZSBwYXRoIG5lZWRzIHRvIGJlIGFwcGVuZGVkIHdpdGggL2hvbWUgYXMgL3RlbXBsYXRlIHdpdGhvdXQgZm9sbG93aW5nIHVybCBpcyBhIHBvdGVudGlhbCBhcnRpY2xlIHVybFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0VXJsID09PSBcIi9cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFVybCA9IFwiL2hvbWVcIjtcclxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VXJsICs9IGF1dG9TY3JvbGxLZXkgKyBcIiZwPVwiICsgY3VycmVudFBhZ2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRvIHVzZSBpZiBuZWNjZXNzYXJ5XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRDb3VudCA9IGl0ZW1Db250YWluZXIucXVlcnlTZWxlY3RvckFsbChpdGVtU2VsZWN0b3IpLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTG9hZCBtb2FyIVxyXG4gICAgICAgICAgICAgICAgICAgIGh0dHBHZXQoXCIvdGVtcGxhdGVcIiArIHJlcXVlc3RVcmwsIGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIGVsZW1lbnRzIG91dCBvZiBodG1sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsb2FkZWRJdGVtcyA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KHJlc3BvbnNlLnJlc3BvbnNlVGV4dCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBzZXJ2ZXIgcmV0dXJuZWQgbGVzcyB0aGFuIG91ciBwYWdlIHNpemUsIHdlJ3ZlIHJlYWNoZWQgdGhlIGVuZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gNiBpcyB1c2VkIGZvciDDhGt0YXZhcmEsIHNob3VsZCBiZSByZXdyaXR0ZW4gdG8gYmUgbW9yZSBkeW5hbWljXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2FkZWRJdGVtcyAmJiBsb2FkZWRJdGVtcy5jaGlsZE5vZGVzLmxlbmd0aCA8IDYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFjaGVkRW5kT2ZJdGVtcyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBlbmQgdGhlbSBpdGVtcyBhbmQgZmFkZSAnZW0gaW4sIHN3b29vc2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUNvbnRhaW5lci5hcHBlbmRDaGlsZChsb2FkZWRJdGVtcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSdyZSBub3QgbG9uZ2VyIGxvYWRpbmcsIGFsbG93aW5nIGZvciB0aGUgbmV4dCBwYWdlIHRvIHN0YXJ0IGxvYWRpbmcgd2hlbiBuZWNjZXNzYXJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9TY3JvbGxMb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgdGhlIGJyb3dzZXIgdmlldyB0byBzdGljayB0byB0aGUgYm90dG9tIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFmdGVyIGxvYWQgYnkgbWFraW5nIHN1cmUgdGhlIHNjcm9sbCBpcyBub3QgYXQgdGhlIGVuZC5cclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2Nyb2xsQnkoMCwgLTEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgcmVnaXN0ZXJDbGlja0xvYWQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIC8vIFF1aWNrICYgZGlydHkgZWxlbWVudCBjaGVvbiB0byBzZWUgd2hldGhlciB3ZSBzaG91bGQgdXNlIHNjcm9sbCBsb2FkXHJcbiAgICAgICAgdmFyIGNsaWNrTG9hZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNsaWNrLWxvYWRcIik7XHJcblxyXG4gICAgICAgIGlmIChjbGlja0xvYWRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBjbGlja0xvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIGxvYWRLZXkgPSBjbGlja0xvYWRFbGVtZW50LmdldEF0dHJpYnV0ZShcImxvYWQta2V5XCIpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ29udGFpbmVyIGZvciBhbGwgaXRlbXMgKHdpbGwgYmUgYXBwZW5kZWQgdG8pXHJcbiAgICAgICAgICAgIHZhciBpdGVtQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sb2FkLWNvbnRhaW5lclwiKTtcclxuICAgICAgICAgICAgLy8gRWFjaCBpbmRpdmlkdWFsIGl0ZW0sIHRvIGNvdW50XHJcbiAgICAgICAgICAgIHZhciBpdGVtU2VsZWN0b3IgPSBcIi5sb2FkLWl0ZW1cIjtcclxuXHJcbiAgICAgICAgICAgIC8vIFdoZXRoZXIgdGhlIGJhY2sgaXMgb3V0IG9mIGl0ZW1zIHRvIGRlbGl2ZXJcclxuICAgICAgICAgICAgdmFyIHJlYWNoZWRFbmRPZkl0ZW1zID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvLyBPbiBzY3JvbGxcclxuICAgICAgICAgICAgY2xpY2tMb2FkRWxlbWVudC5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJldHVybiBpZiB3ZSdyZSBvdXQgb2YgaXRlbXMgb3IgaXMgYWxyZWFkeSBsb2FkaW5nIGFuIGl0ZW0gYmF0Y2hcclxuICAgICAgICAgICAgICAgIGlmIChjbGlja0xvYWRpbmcgfHwgcmVhY2hlZEVuZE9mSXRlbXMpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIE1hcmsgdGhhdCB3ZSdyZSBsb2FkaW5nIGEgYmF0Y2hcclxuICAgICAgICAgICAgICAgIGNsaWNrTG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyBJbmNyZWFzZSB0aGUgY3VycmVudCBwYWdlciBwYWdlIGxvYWRlZFxyXG4gICAgICAgICAgICAgICAgY3VycmVudFBhZ2UrKztcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBEaXJ0eSB1cmwgY3JlYXRpb24gZm9yIHRoZSBhamF4IGVuZHBvaW50XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdFVybCA9IGNsaWNrTG9hZEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSB8fCB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XHJcbiAgICAgICAgICAgICAgICAvLyBIb21lIHBhdGggbmVlZHMgdG8gYmUgYXBwZW5kZWQgd2l0aCAvaG9tZSBhcyAvdGVtcGxhdGUgd2l0aG91dCBmb2xsb3dpbmcgdXJsIGlzIGEgcG90ZW50aWFsIGFydGljbGUgdXJsXHJcbiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdFVybCA9PT0gXCIvXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFVybCA9IFwiL2hvbWVcIjtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RVcmwgKz0gbG9hZEtleSArIFwiJnA9XCIgKyBjdXJyZW50UGFnZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUbyB1c2UgaWYgbmVjY2Vzc2FyeVxyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRDb3VudCA9IGl0ZW1Db250YWluZXIuZmluZChpdGVtU2VsZWN0b3IpLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBMb2FkIG1vYXIhXHJcbiAgICAgICAgICAgICAgICBodHRwR2V0KFwiL3RlbXBsYXRlXCIgKyByZXF1ZXN0VXJsLCBmdW5jdGlvbiAoeGhyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBlbGVtZW50cyBvdXQgb2YgaHRtbFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsb2FkZWRJdGVtcyA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KHJlc3BvbnNlLnJlc3BvbnNlVGV4dCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHNlcnZlciByZXR1cm5lZCBsZXNzIHRoYW4gb3VyIHBhZ2Ugc2l6ZSwgd2UndmUgcmVhY2hlZCB0aGUgZW5kLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIDYgaXMgdXNlZCBmb3Igw4RrdGF2YXJhLCBzaG91bGQgYmUgcmV3cml0dGVuIHRvIGJlIG1vcmUgZHluYW1pY1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2FkZWRJdGVtcyAmJiBsb2FkZWRJdGVtcy5jaGlsZE5vZGVzLmxlbmd0aCA8IDYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWNoZWRFbmRPZkl0ZW1zID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQXBwZW5kIHRoZW0gaXRlbXMgYW5kIGZhZGUgJ2VtIGluLCBzd29vb3NoXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbUNvbnRhaW5lci5hcHBlbmRDaGlsZChsb2FkZWRJdGVtcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlJ3JlIG5vdCBsb25nZXIgbG9hZGluZywgYWxsb3dpbmcgZm9yIHRoZSBuZXh0IHBhZ2UgdG8gc3RhcnQgbG9hZGluZyB3aGVuIG5lY2Nlc3NhcnlcclxuICAgICAgICAgICAgICAgICAgICBjbGlja0xvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciByZWdpc3RlckZvcm1GdW5jdGlvbnMgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gLnN0YXRlLS1hY3RpdmUgcMOlIGxhYmVsc1xyXG4gICAgICAgIGZ1bmN0aW9uIHNldEFjdGl2ZShhKSB7IGEuY2xhc3NMaXN0LmFkZChcInN0YXRlLS1hY3RpdmVcIik7IH1cclxuICAgICAgICBmdW5jdGlvbiBzZXRJbmFjdGl2ZShhKSB7IGEuY2xhc3NMaXN0LnJlbW92ZShcInN0YXRlLS1hY3RpdmVcIik7IH1cclxuXHJcbiAgICAgICAgdmFyIGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dCwgdGV4dGFyZWFcIik7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlbC52YWx1ZSAhPT0gbnVsbCAmJiBlbC52YWx1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2libGluZ3MoZWwsIFwibGFiZWxcIiwgc2V0QWN0aXZlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSwgMjAwKTtcclxuXHJcbiAgICAgICAgaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBzaWJsaW5ncyhlbCwgXCJsYWJlbFwiLCBzZXRBY3RpdmUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlLmxlbmd0aCA8IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBzaWJsaW5ncyhlbCwgXCJsYWJlbFwiLCBzZXRJbmFjdGl2ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIGF1dG8tcmVzaXplIHRleHRhcmVhXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcInRleHRhcmVhXCIpLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3MgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzKTtcclxuICAgICAgICAgICAgICAgIC8vIHJlc2V0IGhlaWdodCB0byBhbGxvdyB0ZXh0YXJlYSB0byBzaHJpbmsgYWdhaW5cclxuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUuaGVpZ2h0ID0gXCJhdXRvXCI7XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIFwiYm94LXNpemluZzogYm9yZGVyLWJveFwiIHdlIG5lZWQgdG8gYWRkIHZlcnRpY2FsIGJvcmRlciBzaXplIHRvIHNjcm9sbEhlaWdodFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5oZWlnaHQgPSAodGhpcy5zY3JvbGxIZWlnaHQgKyBwYXJzZUludChjcy5nZXRQcm9wZXJ0eVZhbHVlKFwiYm9yZGVyLXRvcC13aWR0aFwiKSkgKyBwYXJzZUludChjcy5nZXRQcm9wZXJ0eVZhbHVlKFwiYm9yZGVyLWJvdHRvbS13aWR0aFwiKSkpICsgXCJweFwiO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgICAgR2V0IHNpYmxpbmdzIG9mIGVsZW1lbnQsIG9wdGlvbmFsIHVzaW5nIHNlbGVjdG9yLCBvcHRpb24gcGVyZm9ybSBjYWxsYmFjayBvbiB0aGVtLlxyXG4gICAgICAgICAgICBCcm93c2VyIENvbXBhdGliaWxpdHk6XHJcbiAgICAgICAgICAgIElFOiAtLCBTYWZhcmk6IDcsIENocm9tZTogMjcsIEVkZ2U6IDc5LCBGaXJlZm94OiAzMlxyXG4gICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gc2libGluZ3MoZWwsIHNlbCwgY2IpIHtcclxuICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSBbXTtcclxuICAgICAgICAgICAgdmFyIHRhcmdldHMgPSBzZWwgPyBlbC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6c2NvcGUgPiBcIiArIHNlbCkgOiBlbC5wYXJlbnROb2RlLmNoaWxkcmVuO1xyXG4gICAgICAgICAgICB0YXJnZXRzLmZvckVhY2goZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldCAhPT0gZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLnB1c2godGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChjYikge1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hlcy5mb3JFYWNoKGNiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hlcztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vICNlbmRyZWdpb25cclxuXHJcbiAgICB2YXIgcmVnaXN0ZXJUb2dnbGVycyA9IGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgbm9kZSA9IG5vZGUgfHwgZG9jdW1lbnQ7XHJcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKFwiW2V3LXRvZ2dsZV1cIiksXHJcbiAgICAgICAgICAgIHRhcmdldFNlbGVjdG9yLFxyXG4gICAgICAgICAgICB0YXJnZXROb2RlcztcclxuXHJcbiAgICAgICAgZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAgICAgdGFyZ2V0U2VsZWN0b3IgPSBlbC5nZXRBdHRyaWJ1dGUoXCJldy10b2dnbGVcIik7XHJcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRTZWxlY3Rvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFNlbGVjdG9yID0gdGFyZ2V0U2VsZWN0b3IuaW5kZXhPZihcIi5cIikgPT09IDAgfHwgdGFyZ2V0U2VsZWN0b3IuaW5kZXhPZihcIiNcIikgPT09IDAgPyB0YXJnZXRTZWxlY3RvciA6IHRhcmdldFNlbGVjdG9yO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldE5vZGVzID0gZWwucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKHRhcmdldFNlbGVjdG9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldE5vZGVzID0gZWwuY2hpbGRyZW47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Tm9kZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXROb2Rlcy5mb3JFYWNoKGZ1bmN0aW9uICh0YXJnZXRFbCkgeyB0b2dnbGVDbGFzcyh0YXJnZXRFbCwgXCJvcGVuXCIpOyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFwiZXctdG9nZ2xlXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBUb2dnbGVzIGEgY2xhc3Mgb24gYW4gZWxlbWVudCBhbmQgc3RvcmVzIHRoZSB2YWx1ZSBpZiBzdG9yYWdlS2V5IGlzIHByb3ZpZGVkXHJcbiAgICAvL1xyXG4gICAgdmFyIHRvZ2dsZUNsYXNzID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNzc0NsYXNzLCBzdG9yYWdlS2V5KSB7XHJcbiAgICAgICAgdmFyIHRvZ2dsZVZhbCA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjc3NDbGFzcykpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNzc0NsYXNzKTtcclxuICAgICAgICAgICAgdG9nZ2xlVmFsID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjc3NDbGFzcyk7XHJcbiAgICAgICAgICAgIHRvZ2dsZVZhbCA9IFwib25cIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU3RvcmUgdmFsdWUgaWYga2V5IGlzIHNwZWNpZmllZFxyXG4gICAgICAgIGlmIChzdG9yYWdlS2V5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgc3RvcmFnZS5zZXRJdGVtKHN0b3JhZ2VLZXksIHRvZ2dsZVZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyAjcmVnaW9uIEJpbmRFd0xvYWRcclxuICAgIHZhciBiaW5kRXdzTG9hZCA9IGZ1bmN0aW9uIChlbCwgdGVtcGxhdGVLZXkpIHtcclxuICAgICAgICBpZiAoIXRlbXBsYXRlS2V5KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIk5vIHRlbXBsYXRlIGtleSBzZXQgaW4gZXdzLWF0dHJpYnV0ZVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSMOkbXRhIGRhdGEgbWVkIGVuIGxpdGVuIGRlbGF5IGbDtnIgYXR0IGludGUgc2VnYSBuZXIgZmlyc3QgbG9hZCB2aWQgZ29vZ2xlLXBhZ2VzcGVlZC1tasOka1xyXG4gICAgICAgIHJ1bkRlbGF5ZWQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBUdXJuIG9uIHVzZUpzb25BcGkgdG8gcmV0dXJuIGpzb24gZGF0YSBpbnN0ZWFkXHJcbiAgICAgICAgICAgIHZhciB1cmxQYXRoID0gbG9jYXRpb24ucGF0aG5hbWUsXHJcbiAgICAgICAgICAgICAgICB1c2VKc29uQXBpID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvLyBIb21lIHBhdGggbmVlZHMgdG8gYmUgYXBwZW5kZWQgd2l0aCAvaG9tZSBhcyAvdGVtcGxhdGUgd2l0aG91dCBmb2xsb3dpbmcgdXJsIGlzIGEgcG90ZW50aWFsIGFydGljbGUgdXJsXHJcbiAgICAgICAgICAgIGlmICh1cmxQYXRoID09PSBcIi9cIilcclxuICAgICAgICAgICAgICAgIHVybFBhdGggPSBcIi9ob21lXCI7XHJcblxyXG4gICAgICAgICAgICAvLyBGdWxsIHVybCwgbGlrZTogL3RlbXBsYXRlL2hvbWU/a2V5PWluc3RhZ3JhbWZlZWRcclxuICAgICAgICAgICAgdXJsUGF0aCA9ICh1c2VKc29uQXBpID8gXCIvYXBpXCIgOiBcIi90ZW1wbGF0ZVwiKSArIHVybFBhdGggKyBcIj9rZXk9XCIgKyB0ZW1wbGF0ZUtleTtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlcXVlc3QgaW5uZXIgdGVtcGxhdGUgYXBpIHdpdGggYWpheCBhbmQgc2V0IHJlc3BvbnNlIHRvIGNvbnRhaW5lclxyXG4gICAgICAgICAgICBodHRwR2V0KHVybFBhdGgsXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoeGhyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHhociAmJiB4aHIucmVzcG9uc2VUZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLmlubmVySFRNTCA9IHhoci5yZXNwb25zZVRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJMb2FkZXIgcmV0dXJuZWQgbm8gcmVzcG9uc2UuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGxvYWRpbmcgYXBpIGZlZWQ6IFwiLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8vICNlbmRyZWdpb25cclxuXHJcbiAgICAvLyAjcmVnaW9uIC0gSW5zdGFncmFtIC1cclxuICAgIHZhciByZWdpc3RlckV3c0luc3RhZ3JhbSA9IGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgbm9kZSA9IG5vZGUgfHwgZG9jdW1lbnQ7XHJcblxyXG4gICAgICAgIC8vIEF0dHJpYnV0ZSB0byBxdWVyeSBmb3IgYW5kIGdldCBrZXkgdmFsdWUgZm9yXHJcbiAgICAgICAgdmFyIHF1ZXJ5QXR0cmlidXRlTmFtZSA9IFwiZXdzLWluc3RhZ3JhbVwiLFxyXG4gICAgICAgICAgICBlbGVtZW50cyA9IG5vZGUucXVlcnlTZWxlY3RvckFsbChcIltcIiArIHF1ZXJ5QXR0cmlidXRlTmFtZSArIFwiXVwiKSxcclxuICAgICAgICAgICAgdGVtcGxhdGVLZXk7XHJcblxyXG4gICAgICAgIGVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgICAgIC8vIEdldCBrZXkgc2V0IG9uIGVsZW1lbnQgcHJpbnRlZCBieSB0aGUgSUctdGVtcGxhdGVcclxuICAgICAgICAgICAgdGVtcGxhdGVLZXkgPSBlbC5nZXRBdHRyaWJ1dGUocXVlcnlBdHRyaWJ1dGVOYW1lKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEJpbmQgaXQncyBsb2FkIGZ1bmMgdXNpbmcgZWxlbWVudCBhcyBjb250ZW50LWNvbnRhaW5lciBhbmQga2V5IHRvIGZldGNoXHJcbiAgICAgICAgICAgIGJpbmRFd3NMb2FkKGVsLCB0ZW1wbGF0ZUtleSk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgYXR0cmlidXRlIGZyb20gZWxlbWVudCB0byBrZWVwIGZpbmFsIG1hcmt1cGdlbmVyYXRpb24gY2xlYW4gYW5kIHByZXZlbnQgZG91YmxlIHJlZ2lzdHJhdGlvbnNcclxuICAgICAgICAgICAgLy8gaWYgcnVuIG11bHRpcGxlIHRpbWVzXHJcbiAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShxdWVyeUF0dHJpYnV0ZU5hbWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAjZW5kcmVnaW9uXHJcblxyXG4gICAgLy8gI3JlZ2lvbiAtIFBvbnR5IC1cclxuXHJcbiAgICB2YXIgcmVnaXN0ZXJFd3NQb250eSA9IGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgbm9kZSA9IG5vZGUgfHwgZG9jdW1lbnQ7XHJcblxyXG4gICAgICAgIC8vIEF0dHJpYnV0ZSB0byBxdWVyeSBmb3IgYW5kIGdldCBrZXkgdmFsdWUgZm9yXHJcbiAgICAgICAgdmFyIHF1ZXJ5QXR0cmlidXRlTmFtZSA9IFwiZXdzLXBvbnR5XCIsXHJcbiAgICAgICAgICAgIGVsZW1lbnRzID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKFwiW1wiICsgcXVlcnlBdHRyaWJ1dGVOYW1lICsgXCJdXCIpLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZUtleTtcclxuXHJcbiAgICAgICAgZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAgICAgLy8gR2V0IGtleSBzZXQgb24gZWxlbWVudCBwcmludGVkIGJ5IHRoZSBJRy10ZW1wbGF0ZVxyXG4gICAgICAgICAgICB0ZW1wbGF0ZUtleSA9IGVsLmdldEF0dHJpYnV0ZShxdWVyeUF0dHJpYnV0ZU5hbWUpO1xyXG5cclxuICAgICAgICAgICAgLy8gQmluZCBpdCdzIGxvYWQgZnVuYyB1c2luZyBlbGVtZW50IGFzIGNvbnRlbnQtY29udGFpbmVyIGFuZCBrZXkgdG8gZmV0Y2hcclxuICAgICAgICAgICAgYmluZEV3c0xvYWQoZWwsIHRlbXBsYXRlS2V5KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBhdHRyaWJ1dGUgZnJvbSBlbGVtZW50IHRvIGtlZXAgZmluYWwgbWFya3VwZ2VuZXJhdGlvbiBjbGVhbiBhbmQgcHJldmVudCBkb3VibGUgcmVnaXN0cmF0aW9uc1xyXG4gICAgICAgICAgICAvLyBpZiBydW4gbXVsdGlwbGUgdGltZXNcclxuICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKHF1ZXJ5QXR0cmlidXRlTmFtZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyAjZW5kcmVnaW9uXHJcblxyXG5cclxuXHJcblxyXG4gICAgLy8gSW5pdCB0byBiZSBjYWxsZWQgaWYgaW4gdXNlLiBEb25lIGF0IHRvcCBvZiBzaXRlL21haW4vZGVmYXVsdC5qc1xyXG4gICAgLy9cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaW5pdDogaW5pdCxcclxuICAgICAgICBydW5EZWxheWVkOiBydW5EZWxheWVkLFxyXG4gICAgICAgIGh0dHBHZXQ6IGh0dHBHZXQsXHJcbiAgICAgICAgaXNFbWFpbDogaXNFbWFpbCxcclxuICAgICAgICBzdG9yYWdlOiBzdG9yYWdlLFxyXG4gICAgICAgIGN1cnJlbnRQYWdlOiBjdXJyZW50UGFnZSxcclxuICAgICAgICBpbkRlYnVnOiBpbkRlYnVnLFxyXG4gICAgICAgIHZlcnNpb246IHZlcnNpb25cclxuICAgIH07XHJcbn0pKCk7XHJcbiIsIi8vUGFyYWxsYXhcclxudmFyIHBhcmFsbGF4SXQgPSBmdW5jdGlvbiAoZSwgdGFyZ2V0LCBwYXJlbnQsIG1vdmVtZW50KSB7XHJcbiAgICB2YXIgcmVsWCA9IGUucGFnZVggLSBvZmZzZXQocGFyZW50KS5sZWZ0XHJcbiAgICB2YXIgcmVsWSA9IGUucGFnZVkgLSBvZmZzZXQocGFyZW50KS50b3BcclxuICAgIHZhciB4ID0gKHJlbFggLSBwYXJlbnQub2Zmc2V0V2lkdGggLyAyKSAvIHBhcmVudC5vZmZzZXRXaWR0aCAqIG1vdmVtZW50XHJcbiAgICB2YXIgeSA9IChyZWxZIC0gcGFyZW50Lm9mZnNldEhlaWdodCAvIDIpIC8gcGFyZW50Lm9mZnNldEhlaWdodCAqIG1vdmVtZW50XHJcbiAgICB0YXJnZXQuc3R5bGUuc2V0UHJvcGVydHkoJy0tcGFyYWxsYXgteCcsIHggKyBcInB4XCIpO1xyXG4gICAgdGFyZ2V0LnN0eWxlLnNldFByb3BlcnR5KCctLXBhcmFsbGF4LXknLCB5ICsgXCJweFwiKTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9mZnNldChlbCkge1xyXG4gICAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcclxuICAgICAgICBzY3JvbGxMZWZ0ID0gd2luZG93LnBhZ2VYT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0LFxyXG4gICAgICAgIHNjcm9sbFRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wXHJcbiAgICByZXR1cm4geyB0b3A6IHJlY3QudG9wICsgc2Nyb2xsVG9wLCBsZWZ0OiByZWN0LmxlZnQgKyBzY3JvbGxMZWZ0IH1cclxufVxyXG5cclxuZnVuY3Rpb24gcGFyYWxsYXhJdGVtKGVsLCBjaGlsZCwgc3BlZWQsIHJlbVNwZWVkKSB7XHJcbiAgICAkKGVsKS5tb3VzZW1vdmUoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBwYXJhbGxheEl0KGUsIHRoaXMucXVlcnlTZWxlY3RvcihjaGlsZCksIHRoaXMsIHNwZWVkKTtcclxuICAgIH0pO1xyXG4gICAgJChlbCkubW91c2VsZWF2ZShmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHBhcmFsbGF4SXQoZSwgdGhpcy5xdWVyeVNlbGVjdG9yKGNoaWxkKSwgdGhpcywgcmVtU3BlZWQpO1xyXG4gICAgfSk7XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cImRlZmF1bHQvZWFzeXdlYi5jb3JlLjEuMC5qc1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJleHRlcm5hbHNwaGlueGx5L2ludmlld2FuaW1hdGlvbi4xLjAuanNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiZXh0ZXJuYWwvanF1ZXJ5Lm1pbi5qc1wiIC8+XHJcblxyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gI3JlZ2lvbiAtIEluaXQgLVxyXG5cclxuICAgIC8vIEluaXQgb2xkIGZ1bmNzIGZyb20gRVctbGliXHJcbiAgICAvL1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cuRWFzeXdlYiAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgIHdpbmRvdy5FYXN5d2ViLmluaXQoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihcImVhc3l3ZWIuY29yZS5qcyBub3QgcHJlc2VudC5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gI2VuZHJlZ2lvblxyXG59KSgpO1xyXG5cclxuXHJcbi8vIEZvbGRlciBzdHJ1Y3R1cmUgZm9yIHNpdGUgc3BlY2lmaWMgY29kZTpcclxuLy9cclxuLy8ganMvY29tcG9uZW50c1xyXG4vLyAgICAgVHlkbGlndCBhdnNraWxkYSBrb21wb25lbnRlciBsw6RnZ3Mgc29tIGVnbmEgZmlsZXIgaMOkci4gVC5leC4gY29udGFjdE1hcC5qcyBlbGxlciBwcm9kdWN0Q2FsY3VsYXRvci5qc1xyXG4vL1xyXG4vLyBqcy92aWV3c1xyXG4vLyAgICAgU8OlbnQgc29tIMOkciBtaW5kcmUga29tcG9uZW50aWd0IG1lbiBrbnV0ZXQgdGlsbCBlbiBlbmRhIHZ5IGzDpGdncyBow6RyLlxyXG4vL1xyXG4vLyBqcy9nbG9iYWwuanNcclxuLy8gICAgIFNtw6UgZ2xvYmFsYSBncmVqZXIga2FuIGzDpGdnYXMgaMOkci4gVMOkbmsgcMOlIGF0dCBhdmdyw6Ruc2Egb2NoIGtsdW1wYSBpaG9wIHPDpW50IHNvbSBow7ZyIGlob3AuXHJcblxyXG5jb25zdCBoYW1idXJnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGFtYnVyZ2VyJyk7XHJcbmNvbnN0IGhlcm9Db250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlcm8nKTtcclxuY29uc3Qgc3VibWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3VibWVudVwiKTtcclxuY29uc3QgZHJvcGRvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRyb3Bkb3duXCIpO1xyXG5cclxuLy9IYW1idXJnZXIgbWVudSBzdGFydFxyXG5cclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5qcy1oYW1idXJnZXJcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGNvbnN0IG5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2XCIpLmNsYXNzTGlzdC50b2dnbGUoXCJvcGVuXCIpO1xyXG4gICAgLy9jb25zdCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ0bi1oZWFkZXJcIikuY2xhc3NMaXN0LnRvZ2dsZShcIm9wZW5cIik7XHJcbiAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHlcIikuY2xhc3NMaXN0LnRvZ2dsZShcIm5vLXNjcm9sbFwiKTtcclxuICAgIGNvbnN0IGJ1cmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuanMtaGFtYnVyZ2VyXCIpLmNsYXNzTGlzdC50b2dnbGUoXCJvcGVuXCIpO1xyXG59KVxyXG5cclxuXHJcbmhhbWJ1cmdlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgc3VibWVudS5jbGFzc0xpc3QuYWRkKFwiaGFtYnVyZ2VyLXN1Ym1lbnVcIik7XHJcblxyXG4gICAgaWYgKGhlcm9Db250ZW50LmNsYXNzTGlzdC5jb250YWlucyhcImhpZGVcIikpIHtcclxuICAgICAgICBoZXJvQ29udGVudC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGhlcm9Db250ZW50LmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbi8vSGFtYnVyZ2VyIG1lbnUgZW5kXHJcblxyXG5cclxuLy9TdWJtZW51IHN0YXJ0XHJcblxyXG5kcm9wZG93bi5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsICgpID0+IHtcclxuICAgIHN1Ym1lbnUuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XHJcbn0pXHJcblxyXG5kcm9wZG93bi5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgKCkgPT4ge1xyXG4gICAgc3VibWVudS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcclxufSlcclxuXHJcbi8vU3VibWVudSBlbmRcclxuXHJcblxyXG4vLyBGaWx0ZXIgbmV3cyBhcnRpY2xlcyBzdGFydFxyXG5cclxuY29uc3QgdGFnQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS10YWddXCIpO1xyXG5jb25zdCBuZXdzSXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2NhcmQtY2F0ZWdvcnldXCIpO1xyXG5cclxuaWYgKG5ld3NJdGVtcy5sZW5ndGggPiAwKSB7XHJcbiAgICB0YWdCdG5zLmZvckVhY2goKGJ0bikgPT4ge1xyXG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgbmV3c0l0ZW1zLmZvckVhY2goKGFydGljbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGFydGljbGUuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnRuLmdldEF0dHJpYnV0ZShcImRhdGEtdGFnXCIpID09PSBcIkFsbFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJ0aWNsZS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJ0aWNsZS5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgXCIwLjAxXCIpXHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhcnRpY2xlLmdldEF0dHJpYnV0ZShcImNhcmQtY2F0ZWdvcnlcIikgPT09IGJ0bi5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFnJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcnRpY2xlLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnRpY2xlLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCBcIjAuMDFcIilcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbi8vRmlsdGVyIG5ld3MgYXJ0aWNsZXMgZW5kXHJcblxyXG5cclxuLy9TZWFyY2ggYXJ0aWNsZSBzdGFydFxyXG5cclxuaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKFwiP3FcIikpIHtcclxuICAgIGlmIChuZXdzSXRlbXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGxpbmsgPSBjcmVhdGVMaW5rKFwiL25ld3NcIiwgXCJSZW5zYVwiLCBcIiM2OWM3YTNcIiwgXCIjMDBiZmE1XCIpO1xyXG4gICAgICAgIGNvbnN0IG5ld3NJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmV0dXJuLWJ1dHRvblwiKTtcclxuICAgICAgICBuZXdzSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gaXRlbS5hcHBlbmRDaGlsZChsaW5rKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IHRleHQgPSBjcmVhdGVUZXh0KFwiSW5nYSBueWhldGVyIGhpdHRhZGVzXCIpO1xyXG4gICAgICAgIGNvbnN0IGxpbmsgPSBjcmVhdGVMaW5rKFwiL25ld3NcIiwgXCJUYSBtaWcgdGlsbGJha2FcIiwgXCIjNjljN2EzXCIsIFwiIzAwYmZhNVwiKTtcclxuICAgICAgICBjb25zdCBuZXdzSXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnJldHVybi1idXR0b25cIik7XHJcbiAgICAgICAgbmV3c0l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgaXRlbS5hcHBlbmRDaGlsZCh0ZXh0KTtcclxuICAgICAgICAgICAgaXRlbS5hcHBlbmRDaGlsZChsaW5rKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4tbGlnaHQtZ3JlZW4nKS5zY3JvbGxJbnRvVmlldygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVMaW5rKGhyZWYsIHRleHQsIGNvbG9yLCBob3ZlckNvbG9yKSB7XHJcbiAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbiAgICBsaW5rLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgaHJlZik7XHJcbiAgICBsaW5rLnRleHRDb250ZW50ID0gdGV4dDtcclxuICAgIGxpbmsuc3R5bGUuY29sb3IgPSBjb2xvcjtcclxuICAgIGxpbmsuc3R5bGUucGFkZGluZyA9IFwiMjBweFwiO1xyXG4gICAgbGluay5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9IFwibm9uZVwiO1xyXG4gICAgbGluay5zdHlsZS50cmFuc2l0aW9uID0gXCJjb2xvciAwLjJzIGVhc2UtaW4tb3V0XCI7XHJcbiAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsICgpID0+IHtcclxuICAgICAgICBsaW5rLnN0eWxlLmNvbG9yID0gaG92ZXJDb2xvcjtcclxuICAgIH0pO1xyXG4gICAgbGluay5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgbGluay5zdHlsZS5jb2xvciA9IGNvbG9yO1xyXG4gICAgfSk7XHJcblxyXG4gICAgbGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgc2Nyb2xsRG93bigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGxpbms7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVRleHQodGV4dCkge1xyXG4gICAgY29uc3QgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gICAgcC50ZXh0Q29udGVudCA9IHRleHQ7XHJcbiAgICByZXR1cm4gcDtcclxufVxyXG5cclxuZnVuY3Rpb24gc2Nyb2xsRG93bigpIHtcclxuICAgIHZhciBjdXJyZW50UG9zaXRpb24gPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcclxuICAgIHZhciBuZXdQb3NpdGlvbiA9IGN1cnJlbnRQb3NpdGlvbiArICh3aW5kb3cuaW5uZXJIZWlnaHQgLyAyKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgbmV3UG9zaXRpb24pO1xyXG4gICAgfSwgMjAwMCk7XHJcbn1cclxuXHJcbi8vU2VhcmNoIGFydGljbGUgZW5kXHJcblxyXG5cclxuLy9JbmVyYWN0aXZlIG1hcCBzdGFydFxyXG5cclxuLy9jb25zdCBzdGF0aWNMb2NhdGlvbnMgPSBbe1xyXG4vLyAgICBpZDogJ2ZzZGZvc2Rkd2RmbjM0NTM0NWsnLFxyXG4vLyAgICBuYW1lOiAnRGFnc21lamFuJyxcclxuLy8gICAgbG9uZ2l0dWRlOiA1OS40NDcyOTUzLFxyXG4vLyAgICBsYXRpdHVkZTogMTcuOTUxOTQ4NCxcclxuLy8gICAgZGVzY3JpcHRpb246ICdsb3JlbSBpcHN1bSdcclxuLy99LFxyXG4vL3tcclxuLy8gICAgaWQ6ICdzZGZpa2p3c2VvdWlmZ2VyMzI0MzRmZHNmJyxcclxuLy8gICAgbmFtZTogJ0jDpGdndmlrJyxcclxuLy8gICAgbG9uZ2l0dWRlOiA1OS40Mzk5MDIxOTk5OTk5OSxcclxuLy8gICAgbGF0aXR1ZGU6IDE3LjkzMDYzMjQsXHJcbi8vICAgIGRlc2NyaXB0aW9uOiAnbG9yZW0gaXBzdW0nXHJcbi8vfSxcclxuLy97XHJcbi8vICAgIGlkOiAnZnNkZm9zZGZuMzQ1MzQ1aycsXHJcbi8vICAgIG5hbWU6ICdLaXN0YScsXHJcbi8vICAgIGxvbmdpdHVkZTogNTkuNDA5MDU1OTAwMDAwMDEsXHJcbi8vICAgIGxhdGl0dWRlOiAxNy45NTAxMzkzLFxyXG4vLyAgICBkZXNjcmlwdGlvbjogJ2xvcmVtIGlwc3VtJ1xyXG4vL30sXHJcbi8ve1xyXG4vLyAgICBpZDogJ2ZzZGZvc2RmbjM0NTM0NWsnLFxyXG4vLyAgICBuYW1lOiAnS3ZhcnRlcmV0IFNsw6RuZGFuJyxcclxuLy8gICAgbG9uZ2l0dWRlOiA1OS4zNDg4MzU1LFxyXG4vLyAgICBsYXRpdHVkZTogMTguMDM5NjgxNixcclxuLy8gICAgZGVzY3JpcHRpb246ICdsb3JlbSBpcHN1bSdcclxuLy99XHJcbi8vXTtcclxuXHJcbmNvbnN0IGxvY2F0aW9ucyA9IFtdO1xyXG5cclxuZnVuY3Rpb24gaW5pdE1hcCgpIHtcclxuICAgIGNvbnN0IG1hcEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcFwiKVxyXG5cclxuICAgIGlmIChtYXBFbGVtZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgY29uc3QgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChtYXBFbGVtZW50LCB7XHJcbiAgICAgICAgICAgIHpvb206IDExLFxyXG4gICAgICAgICAgICBjZW50ZXI6IHsgbGF0OiA1OS4zMjkzMjM0OTk5OTk5OSwgbG5nOiAxOC4wNjg1ODA4IH0sXHJcbiAgICAgICAgICAgIHN0eWxlczogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJ3YXRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeS5maWxsXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiNkM2QzZDNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwidHJhbnNpdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjODA4MDgwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ2aXNpYmlsaXR5XCI6IFwib2ZmXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInJvYWQuaGlnaHdheVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeS5zdHJva2VcIixcclxuICAgICAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInZpc2liaWxpdHlcIjogXCJvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjYjNiM2IzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInJvYWQuaGlnaHdheVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeS5maWxsXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiNmZmZmZmZcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwicm9hZC5sb2NhbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeS5maWxsXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ2aXNpYmlsaXR5XCI6IFwib25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiI2ZmZmZmZlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwid2VpZ2h0XCI6IDEuOFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwicm9hZC5sb2NhbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeS5zdHJva2VcIixcclxuICAgICAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiI2Q3ZDdkN1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJwb2lcIixcclxuICAgICAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnkuZmlsbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidmlzaWJpbGl0eVwiOiBcIm9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiNlYmViZWJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwiYWRtaW5pc3RyYXRpdmVcIixcclxuICAgICAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIixcclxuICAgICAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiI2E3YTdhN1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkLmFydGVyaWFsXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5LmZpbGxcIixcclxuICAgICAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiI2ZmZmZmZlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkLmFydGVyaWFsXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5LmZpbGxcIixcclxuICAgICAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiI2ZmZmZmZlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJsYW5kc2NhcGVcIixcclxuICAgICAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnkuZmlsbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidmlzaWJpbGl0eVwiOiBcIm9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiNlZmVmZWZcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwicm9hZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJsYWJlbHMudGV4dC5maWxsXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiM2OTY5NjlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwiYWRtaW5pc3RyYXRpdmVcIixcclxuICAgICAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidmlzaWJpbGl0eVwiOiBcIm9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiM3MzczNzNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwicG9pXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy5pY29uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ2aXNpYmlsaXR5XCI6IFwib2ZmXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInBvaVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJsYWJlbHNcIixcclxuICAgICAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInZpc2liaWxpdHlcIjogXCJvZmZcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwicm9hZC5hcnRlcmlhbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeS5zdHJva2VcIixcclxuICAgICAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiI2Q2ZDZkNlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy5pY29uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ2aXNpYmlsaXR5XCI6IFwib2ZmXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7fSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwicG9pXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5LmZpbGxcIixcclxuICAgICAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiI2RhZGFkYVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZmV0Y2hMb2NhdGlvbnMoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgc2V0TWFya2VycyhtYXApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBmZXRjaExvY2F0aW9ucygpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgZmV0Y2goJ2h0dHBzOi8vZWxiaWxpby1hZG1pbi1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9vcGVuLWxvY2F0aW9ucycpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkYXRhLm1hcChsb2NhdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxvY2F0aW9uT2JqZWN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogbG9jYXRpb24uaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGxvY2F0aW9uLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogbG9jYXRpb24ubG9uZ2l0dWRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXRpdHVkZTogbG9jYXRpb24ubGF0aXR1ZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBsb2NhdGlvbi5kZXNjcmlwdGlvbiA/IGxvY2F0aW9uLmRlc2NyaXB0aW9uIDogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmw6IGxvY2F0aW9uLmltYWdlVXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlczogbG9jYXRpb24udmVoaWNsZXMubWFwKHZlaGljbGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB2ZWhpY2xlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHZlaGljbGUuZGVzY3JpcHRpb24gPyB2ZWhpY2xlLmRlc2NyaXB0aW9uIDogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25zLnB1c2gobG9jYXRpb25PYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiByZWplY3QoZXJyb3IpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRNYXJrZXJzKG1hcCkge1xyXG4gICAgY29uc3QgaWNvbiA9IHtcclxuICAgICAgICB1cmw6ICdodHRwczovL2hlbXVsa29tbXVuaWthdGlvbi5zZS9wZXJtYW5lbnQvZWxiaWxpby9tYXBib3gtaWNvbi5wbmcnLFxyXG4gICAgICAgIHNjYWxlZFNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDUwLCA1MCksXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHNoYXBlID0ge1xyXG4gICAgICAgIGNvb3JkczogWzAsIDAsIDcwLCA3MF0sXHJcbiAgICAgICAgdHlwZTogJ3JlY3QnXHJcbiAgICB9O1xyXG5cclxuICAgIGxvY2F0aW9ucy5mb3JFYWNoKGxvY2F0aW9uID0+IHtcclxuICAgICAgICBjb25zdCBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IHsgbGF0OiBsb2NhdGlvbi5sYXRpdHVkZSwgbG5nOiBsb2NhdGlvbi5sb25naXR1ZGUgfSxcclxuICAgICAgICAgICAgbWFwLFxyXG4gICAgICAgICAgICBpY29uOiBpY29uLFxyXG4gICAgICAgICAgICBzaGFwZTogc2hhcGUsXHJcbiAgICAgICAgICAgIHRpdGxlOiBsb2NhdGlvbi5uYW1lLFxyXG4gICAgICAgICAgICBpbWFnZVVybDogbG9jYXRpb24uaW1hZ2VVcmwsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1hcmtlci5hZGRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdmVoaWNsZXNMaXN0ID0gbG9jYXRpb24udmVoaWNsZXMubWFwKHZlaGljbGUgPT4gYDxsaT4ke3ZlaGljbGUubmFtZX0gLSAke3ZlaGljbGUuZGVzY3JpcHRpb259PC9saT5gKS5qb2luKCcnKTtcclxuICAgICAgICAgICAgY29uc3QgY29udGVudFN0cmluZyA9IGA8ZGl2IGNsYXNzPVwicG9wdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ3ZWlnaHQtYm9sZFwiPiR7bG9jYXRpb24ubmFtZX08L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgIDx1bD4ke3ZlaGljbGVzTGlzdH08L3VsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cImNhci1pbWdcIiBzcmM9JHtsb2NhdGlvbi5pbWFnZVVybH0gYWx0PVwiUG9vbC1iaWxcIi8+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly9pbnRlcmNvbS5oZWxwL2VsYmlsaW9oZWxwY2VudGVyL3N2L2NvbGxlY3Rpb25zLzI1NjgyNTAtYm9rYS1oeXJhLW9jaC1sYWRkYS1mb3Jkb25ldFwiIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnkgYnRuLWxpZ2h0LWdyZWVuXCI+Qk9LQTwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpbmZvV2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coe1xyXG4gICAgICAgICAgICAgICAgY29udGVudDogY29udGVudFN0cmluZyxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpbmZvV2luZG93Lm9wZW4obWFwLCBtYXJrZXIpO1xyXG5cclxuICAgICAgICAgICAgbWFwLmFkZExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaW5mb1dpbmRvdy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG53aW5kb3cuaW5pdE1hcCA9IGluaXRNYXA7XHJcblxyXG4vL0luZXJhY3RpdmUgbWFwIGVuZCJdfQ==
